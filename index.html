<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>國小生字書寫遮蔽複習系統</title>
    
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 引入 React 和 ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 引入 Babel 用來解析 JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 字型設定 -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        /* 標楷體專用類別 */
        .font-kai {
            font-family: "BiauKai", "標楷體", "DFKai-SB", "KaiTi", serif;
            font-weight: normal;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // 圖示元件 (替代 lucide-react)
        // ==========================================
        const IconWrapper = ({ children, size = 24, className = "" }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {children}
            </svg>
        );

        const BookOpen = (props) => (
            <IconWrapper {...props}>
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
            </IconWrapper>
        );

        const RefreshCw = (props) => (
            <IconWrapper {...props}>
                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" />
                <path d="M21 3v5h-5" />
                <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" />
                <path d="M8 21H3v-5" />
            </IconWrapper>
        );

        const ArrowRight = (props) => (
            <IconWrapper {...props}>
                <path d="M5 12h14" />
                <path d="m12 5 7 7-7 7" />
            </IconWrapper>
        );

        const Home = (props) => (
            <IconWrapper {...props}>
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                <polyline points="9 22 9 12 15 12 15 22" />
            </IconWrapper>
        );

        const HelpCircle = (props) => (
            <IconWrapper {...props}>
                <circle cx="12" cy="12" r="10" />
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
                <path d="M12 17h.01" />
            </IconWrapper>
        );

        const Star = (props) => (
            <IconWrapper {...props}>
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
            </IconWrapper>
        );

        const Award = (props) => (
            <IconWrapper {...props}>
                <circle cx="12" cy="8" r="7" />
                <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88" />
            </IconWrapper>
        );

        const Clock = (props) => (
            <IconWrapper {...props}>
                <circle cx="12" cy="12" r="10" />
                <polyline points="12 6 12 12 16 14" />
            </IconWrapper>
        );

        const ChevronLeft = (props) => (
            <IconWrapper {...props}>
                <path d="m15 18-6-6 6-6" />
            </IconWrapper>
        );

        const Layers = (props) => (
            <IconWrapper {...props}>
                <polygon points="12 2 2 7 12 12 22 7 12 2" />
                <polyline points="2 17 12 22 22 17" />
                <polyline points="2 12 12 17 22 12" />
            </IconWrapper>
        );

        const Volume2 = (props) => (
            <IconWrapper {...props}>
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
                <path d="M15.54 8.46a5 5 0 0 1 0 7.07" />
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14" />
            </IconWrapper>
        );

        // ==========================================
        // 資料庫區域
        // ==========================================

        // 1. 康軒版 (完整資料)
        const DATA_KANG_XUAN = [
          {
            id: 1,
            title: "第一冊",
            lessons: [
              { title: "第一課 拍拍手", words: ["拍", "手", "左", "右", "你", "他", "也", "上", "下"] },
              { title: "第二課 這是誰的", words: ["這", "是", "誰", "的", "我", "分", "好", "了", "啊", "多", "個"] },
              { title: "第三課 秋千", words: ["秋", "千", "和", "玩", "陪", "高", "山", "到", "大", "海", "朋", "友", "們", "起"] },
              { title: "第四課 大個子，小個子", words: ["子", "小", "課", "兩", "人", "拉", "看", "找", "隻", "青", "蛙", "開", "心"] },
              { title: "第五課 比一比", words: ["比", "門", "裡", "外", "有", "什", "麼", "不", "同", "早", "晚", "王", "主", "又"] },
              { title: "第六課 小路", words: ["路", "長", "白", "花", "紅", "走", "在", "向", "說", "朵", "從", "頭", "那"] },
            ]
          },
          {
            id: 2,
            title: "第二冊",
            lessons: [
              { title: "第一課 看", words: ["要", "靜", "天", "空", "雲", "水", "蟲", "鳥", "草", "先", "完", "再", "去"] },
              { title: "第二課 花園裡有什麼", words: ["園", "聽", "沒", "正", "唱", "著", "輕", "快", "歌", "出", "新", "芽", "聞", "身", "香", "呢"] },
              { title: "第三課 媽媽的音樂會", words: ["媽", "音", "樂", "會", "始", "來", "重", "短", "陣", "過", "後", "吃", "菜", "就", "桌", "真"] },
              { title: "第四課 鞋", words: ["鞋", "回", "家", "把", "脫", "爸", "靠", "見", "像", "船", "港", "口", "享", "受", "溫", "暖"] },
              { title: "第五課 小種子快長大", words: ["種", "問", "怎", "做", "它", "才", "需", "於", "澆", "陽", "光", "放", "院", "公", "話", "伴"] },
              { title: "第六課 奶奶的小跟班", words: ["奶", "跟", "班", "床", "弟", "她", "酒", "拿", "卡", "片", "給", "寫", "喜", "歡", "您", "都"] },
              { title: "第七課 作夢的雲", words: ["作", "夢", "躺", "自", "己", "變", "成", "棉", "糖", "黑", "鵝", "得", "更", "漂", "亮"] },
              { title: "第八課 妹妹的紅雨鞋", words: ["妹", "雨", "雙", "穿", "滴", "遊", "戲", "顆", "珍", "珠", "落", "面", "魚", "缸", "金", "游"] },
              { title: "第九課 七彩的虹", words: ["彩", "虹", "太", "國", "掃", "除", "洗", "淨", "馬", "低", "刷", "樹", "葉", "很", "認", "送"] },
              { title: "第十課 和你在一起", words: ["地", "化", "趣", "線", "風", "箏", "升", "神", "奇", "跑", "跳", "笑", "每", "件", "事", "情"] },
              { title: "第十一課 生日快樂", words: ["生", "日", "今", "記", "時", "知", "道", "嗎", "學", "收", "張", "祝", "福", "第", "次", "謝"] },
              { title: "第十二課 小黑", words: ["想", "燈", "前", "點", "半", "清", "楚", "停", "休", "息", "兒", "吧", "幫", "加", "油", "慢"] },
            ]
          },
          {
            id: 3,
            title: "第三冊",
            lessons: [
              { title: "第一課 新學年新希望", words: ["年", "希", "望", "坐", "位", "本", "淡", "書", "老", "師", "以", "為", "故", "用", "力", "只", "現", "還"] },
              { title: "第二課 一起做早餐", words: ["全", "蛋", "煎", "圓", "番", "茄", "切", "輪", "司", "夾", "吐", "中", "方", "城", "堡", "接", "畫", "臉"] },
              { title: "第三課 走過小巷", words: ["巷", "叔", "貓", "屋", "捧", "蝴", "蝶", "忙", "娶", "娘", "黃", "筆", "打", "扮", "樣", "越", "美", "麗"] },
              { title: "第四課 運動會", words: ["運", "動", "飄", "熱", "鬧", "舞", "哇", "往", "容", "步", "汗", "腳", "協", "聲", "河", "氣", "最", "可"] },
              { title: "第五課 坐竹籃船", words: ["竹", "籃", "鄉", "南", "暑", "假", "帶", "等", "跨", "划", "吹", "邊", "叫", "原", "近", "捕", "活", "識"] },
              { title: "第六課 小鎮的柿餅節", words: ["鎮", "餅", "節", "因", "此", "進", "排", "遠", "色", "愛", "月", "乾", "甜", "客", "買", "親", "如", "意"] },
              { title: "第七課 國王的新衣裳", words: ["衣", "胖", "針", "簡", "單", "聰", "明", "臣", "敢", "東", "西", "直", "棒", "街", "滿", "眼", "哪", "思"] },
              { title: "第八課 「聰明」的小熊", words: ["渴", "烏", "喝", "瓶", "法", "森", "林", "物", "旅", "行", "午", "裝", "許", "石", "難", "忘", "哈", "但"] },
              { title: "第九課 大象有多重？", words: ["象", "操", "粗", "腿", "柱", "砍", "幾", "部", "搖", "沖", "首", "牽", "沉", "少", "沿", "然", "紀", "竟"] },
              { title: "第十課 新年快樂", words: ["雪", "梨", "夜", "卻", "冷", "冬", "臺", "季", "相", "反", "煙", "火", "待", "雖", "春", "貨", "期", "飯"] },
              { title: "第十一課 遠方來的黑皮", words: ["皮", "具", "飛", "者", "洋", "寒", "北", "嘴", "伸", "飽", "沙", "急", "服", "站", "翅", "膀", "充", "念"] },
              { title: "第十二課 我愛冬天", words: ["灰", "涼", "牠", "鼓", "絡", "欣", "發", "居", "冒", "冰", "圍", "咪", "幸", "團", "聚", "愉", "鍋", "妙"] },
            ]
          },
          {
            id: 4,
            title: "第四冊",
            lessons: [
              { title: "第一課 春天的顏色", words: ["顏", "池", "塘", "藍", "田", "洞", "綠", "蜜", "蜂", "窩", "粉", "桃", "興", "處", "景"] },
              { title: "第二課 花衣裳", words: ["裳", "驚", "所", "躲", "房", "間", "討", "論", "驚", "躲", "間", "指", "裙", "而", "且", "紫", "將", "工", "合", "貼", "候"] },
              { title: "第三課 彩色王國", words: ["座", "對", "微", "表", "各", "突", "強", "被", "綻", "特", "舌", "賞", "果", "定", "互", "換", "共", "漸"] },
              { title: "第四課 爸爸", words: ["散", "芒", "透", "暗", "照", "掛", "角", "揚", "星", "閃", "晶", "當", "睡", "悄", "常", "旁", "臂", "永"] },
              { title: "第五課 我的家人", words: ["剛", "品", "爺", "採", "蕉", "軍", "告", "訴", "辛", "苦", "流", "堅", "固", "安", "寶", "貝", "幅", "管"] },
              { title: "第六課 愛笑的大樹", words: ["教", "室", "棵", "及", "終", "立", "刻", "抱", "並", "猜", "文", "借", "枝", "鉛", "校", "車", "哥", "牛"] },
              { title: "第七課 月光河", words: ["久", "條", "祕", "兔", "其", "猴", "病", "探", "體", "惜", "無", "辦", "之", "請", "鼻", "吸", "模", "度"] },
              { title: "第八課 黃狗生蛋", words: ["狗", "雞", "經", "怪", "羊", "鴨", "信", "錯", "睛", "仔", "細", "能", "消", "傳", "嚇", "忍", "住", "顧"] },
              { title: "第九課 神筆馬良", words: ["良", "孩", "錢", "醒", "尾", "巴", "村", "貪", "皇", "帝", "派", "抓", "銀", "准", "島", "元", "波", "浪"] },
              { title: "第十課 小熊的邀請", words: ["熊", "朝", "踮", "尖", "木", "架", "些", "足", "蹈", "轉", "趕", "耳", "啄", "袋", "鼠", "摸", "讀", "琅"] },
              { title: "第十一課 小讀者樂園", words: ["圖", "館", "參", "題", "士", "講", "甲", "形", "志", "約", "數", "迎", "交", "令", "世", "界", "險", "庫"] },
              { title: "第十二課 巨人山", words: ["巨", "累", "髮", "根", "牆", "狂", "呼", "差", "睜", "緊", "餓", "百", "食", "桶", "倒", "量", "底"] },
            ]
          },
          {
            id: 5,
            title: "第五冊",
            lessons: [
              { title: "第一課 心的悄悄話", words: ["字", "舟", "灑", "載", "讓", "愁", "嘆", "忌", "妒", "訣", "似", "練", "習"] },
              { title: "第二課 妙故事點點名", words: ["名", "窗", "戶", "板", "答", "案", "專", "穫", "已", "傘", "喊", "章", "詞", "語"] },
              { title: "第三課 繞口令村", words: ["繞", "由", "迷", "失", "岸", "撞", "扶", "急", "店", "機", "料", "實", "留", "觀"] },
              { title: "第四課 小丑魚和海葵", words: ["露", "懷", "居", "準", "射", "刺", "痛", "使", "毒", "欺", "負", "感", "遇", "危"] },
              { title: "第五課 飛舞的絲帶", words: ["朝", "努", "總", "段", "利", "害", "整", "該", "紙", "李", "貴", "必", "通", "場"] },
              { title: "第六課 小女生", words: ["女", "非", "關", "澡", "怕", "應", "平", "毛", "肚", "蓋", "摸", "柔", "揉", "副"] },
              { title: "第七課 淡水小鎮", words: ["統", "商", "阿", "婆", "鐵", "硬", "愈", "嚼", "蒼", "坡", "憶", "夕", "盪", "網"] },
              { title: "第八課 安平古堡參觀記", words: ["育", "史", "型", "功", "敗", "守", "護", "勇", "兵", "土", "附", "瞭", "頂", "標"] },
              { title: "第九課 馬太鞍的巴拉告", words: ["溼", "族", "別", "捕", "式", "造", "層", "竹", "植", "或", "釣", "智", "慧", "態"] },
              { title: "第十課 狐狸的故事", words: ["狐", "里", "兄", "密", "入", "呀", "踢", "棄", "酸", "鴉", "肉", "塊", "計", "壯"] },
              { title: "第十一課 巨人的花園", words: ["悅", "拜", "訪", "免", "離", "漫", "盼", "枯", "鑽", "恍", "悟", "拆", "盛", "隨"] },
              { title: "第十二課 奇特的朋友", words: ["障", "漠", "綿", "央", "男", "複", "疑", "算", "歲", "帽", "退", "吞", "蛇", "訝"] },
            ]
          },
          {
            id: 6,
            title: "第六冊",
            lessons: [
              { title: "第一課 許願", words: ["願", "晨", "苗", "徐", "嫩", "築", "巢", "虔", "誠", "爛", "杜", "鮮", "耀", "翔"] },
              { title: "第二課 下雨的時候", words: ["披", "紗", "順", "垂", "股", "涼", "覺", "舒", "味", "軟", "踩", "陷", "連", "摺"] },
              { title: "第三課 遇見美如奶奶", words: ["髮", "鏡", "架", "拾", "區", "吵", "麻", "腦", "電", "展", "術", "助", "製", "椅"] },
              { title: "第四課 工匠之祖", words: ["匠", "祖", "宮", "惱", "便", "解", "斧", "割", "鋒", "速", "善", "察", "考", "尺"] },
              { title: "第五課 學田鼠開路", words: ["市", "倫", "決", "糾", "紛", "律", "改", "挖", "設", "議", "員", "付", "費", "建"] },
              { title: "第六課 神奇密碼", words: ["慶", "描", "目", "程", "結", "資", "影", "周", "例", "產", "券", "包", "類", "技"] },
              { title: "第七課 油桐花．五月雪", words: ["桐", "初", "夏", "腰", "取", "抬", "梢", "禮", "肩", "掌", "瓣", "鋪", "童", "染"] },
              { title: "第八課 大自然的美術館", words: ["野", "柳", "質", "岬", "趴", "仙", "列", "潤", "岩", "菇", "豆", "雕", "塑", "鬼"] },
              { title: "第九課 臺灣的山椒魚", words: ["灣", "冰", "爬", "陸", "肺", "膚", "黏", "液", "保", "持", "敵", "縫", "伐", "球"] },
              { title: "第十課 漁夫和金魚", words: ["漁", "夫", "婦", "拖", "求", "恩", "報", "盆", "值", "寬", "暴", "聊", "隆", "破"] },
              { title: "第十一課 聰明的鼠鹿", words: ["鹿", "幕", "虎", "布", "夠", "損", "威", "餐", "填", "理", "胃", "撲", "槍", "逃"] },
              { title: "第十二課 還要跌幾次", words: ["跌", "陡", "民", "措", "編", "謠", "提", "伯", "萬", "糟", "糕", "唉", "救", "毫"] },
            ]
          },
          {
            id: 7,
            title: "第七冊",
            lessons: [
              { title: "第一課 水陸小高手", words: ["泳", "串", "般", "姿", "溜", "耳", "鷹", "滑", "遨", "緩", "陀", "螺", "轉", "躍", "煩"] },
              { title: "第二課 放學後", words: ["招", "湯", "拋", "糧", "姐", "爭", "警", "偷", "則", "繩", "依", "捨", "束", "暫", "幸"] },
              { title: "第三課 我的籃球夢", words: ["社", "邀", "與", "遙", "投", "熟", "巧", "彈", "曾", "揮", "彼", "秒", "喧", "優", "弧"] },
              { title: "第四課 永遠的馬偕", words: ["偕", "醫", "命", "奉", "獻", "療", "衛", "藥", "治", "翻", "嶺", "捐", "宿", "堂", "濃"] },
              { title: "第五課 假如給我三天光明", words: ["凱", "勒", "業", "勵", "寧", "視", "注", "憑", "蓓", "蕾", "何", "毯", "適", "繽", "盡"] },
              { title: "第六課 攀登生命的高峰", words: ["秀", "稱", "朗", "登", "穆", "瑪", "峰", "母", "酷", "磨", "攀", "氧", "訓", "谷", "響"] },
              { title: "第七課 美味的一堂課", words: ["薄", "烙", "沾", "咖", "哩", "印", "甩", "材", "醬", "義", "麵", "郁", "壽", "醋", "未"] },
              { title: "第八課 建築界的長頸鹿", words: ["臨", "樓", "頸", "代", "濟", "阻", "尼", "器", "震", "京", "晴", "塔", "訊", "吉", "橋"] },
              { title: "第九課 請到我的家鄉來", words: ["佛", "泰", "廟", "華", "尚", "逛", "埃", "羅", "勢", "窪", "堤", "防", "潮", "鬱", "划"] },
              { title: "第十課 奇幻旋律", words: ["幻", "旋", "扁", "瞬", "驗", "牙", "芝", "盜", "邁", "困", "龐", "搓", "榮", "富", "遍"] },
              { title: "第十一課 兔子先生等等我", words: ["背", "錶", "掉", "深", "鎖", "鑰", "匙", "汁", "示", "迫", "袋", "哭", "盒", "扇", "遲"] },
              { title: "第十二課 老鞋匠和小精靈", words: ["妻", "耐", "革", "賣", "倍", "謎", "鐘", "敲", "靈", "鎚", "嘖", "足", "蹈", "蹦", "內"] },
            ]
          },
          {
            id: 8,
            title: "第八冊",
            lessons: [
              { title: "第一課 一束鮮花", words: ["潔", "環", "境", "甚", "至", "懶", "梳", "髒", "臭", "雜", "調", "叢", "暢", "格", "言"] },
              { title: "第二課 心動不如行動", words: ["川", "缺", "窮", "繼", "研", "既", "租", "備", "缽", "緣", "達", "慚", "愧", "慮", "絆"] },
              { title: "第三課 選拔動物之星", words: ["啟", "宣", "選", "勤", "健", "厲", "蝸", "寸", "駱", "駝", "皺", "眉", "艘", "艇", "拭"] },
              { title: "第四課 米食飄香", words: ["稻", "米", "粒", "蘿", "蔔", "漿", "蒸", "鹹", "財", "粿", "艾", "康", "粽", "推", "陳"] },
              { title: "第五課 讀書報告——藍色小洋裝", words: ["籍", "繪", "版", "介", "峽", "玉", "泣", "敏", "癢", "麥", "封", "淺", "查", "酵", "讚"] },
              { title: "第六課 我愛鹿港", words: ["插", "拌", "磚", "昂", "繁", "葫", "蘆", "彎", "狹", "窄", "喻", "曉", "井", "芬", "芳"] },
              { title: "第七課 未來的模樣", words: ["跡", "移", "搭", "輸", "鍵", "盤", "饑", "荒", "配", "均", "遷", "致", "惡", "攜", "眨"] },
              { title: "第八課 動物老師的智慧", words: ["眾", "領", "獨", "厚", "蹼", "趾", "膜", "構", "潛", "易", "壁", "舉", "究", "肢", "絕"] },
              { title: "第九課 向太空出發", words: ["僅", "號", "姆", "斯", "仍", "津", "嘗", "試", "測", "署", "億", "翁", "嚮", "引", "催"] },
              { title: "第十課 小青蛙想看海", words: ["豪", "忽", "瞧", "灘", "苔", "滾", "禁", "際", "廣", "丈", "災", "旱", "耗", "遺", "憾"] },
              { title: "第十一課 窗前的月光", words: ["皎", "瘦", "嫦", "娥", "搗", "吳", "霜", "映", "勾", "浮", "盞", "否", "舊", "淚", "孤"] },
              { title: "第十二課 如來佛的手掌心", words: ["乖", "筋", "斗", "箍", "喚", "掀", "修", "咒", "橘", "擋", "掏", "齊", "聖", "砰", "壓"] },
            ]
          },
          {
            id: 9,
            title: "第九冊",
            lessons: [
              { title: "第一課 蚊帳大使", words: ["蚊", "帳", "洲", "瘧", "疾", "死", "叮", "存", "募", "集", "寄", "贈", "獎", "狀", "藏", "誌", "基", "赴"] },
              { title: "第二課 從空中看臺灣", words: ["德", "乎", "血", "攝", "颱", "錄", "哀", "巒", "縱", "臍", "禍", "殘", "檳", "榔", "降", "鏟", "汙", "斷"] },
              { title: "第三課 攀岩高手", words: ["峭", "勁", "聳", "飢", "隱", "扯", "銳", "箭", "韌", "虯", "鬚", "茂", "止", "蔓", "藉", "豐", "挫", "折"] },
              { title: "第四課 恆久的美", words: ["恆", "澄", "穗", "養", "源", "藝", "樸", "堆", "撿", "巾", "痠", "素", "尊", "嚴", "勞", "怨", "慷", "慨", "滋"] },
              { title: "第五課 它抓得住你——商標的故事", words: ["譽", "務", "聯", "核", "申", "局", "松", "註", "冊", "企", "毅", "歷", "英", "銷", "售", "勝", "霸", "項"] },
              { title: "第六課 故事「動」起來", words: ["娛", "汽", "哨", "典", "框", "劇", "父", "責", "判", "鳴", "穎", "獲", "佳", "膩", "效", "隊", "益", "貌", "官", "增"] },
              { title: "第七課 為生命找出口", words: ["逆", "穩", "憐", "競", "抗", "逸", "鄰", "脈", "絡", "緻", "弱", "噴", "嚏", "織", "碌", "盎", "膽", "圈", "疲"] },
              { title: "第八課 最勇敢的女孩", words: ["坦", "性", "恐", "怖", "組", "占", "播", "控", "制", "傷", "攻", "擊", "權", "脅", "復", "武", "撼", "懼"] },
              { title: "第九課 在挫折中成長", words: ["維", "戰", "崎", "嶇", "拳", "癌", "症", "銅", "牌", "屢", "減", "予", "幼", "椰", "即", "腐", "衝", "鍛", "鍊"] },
              { title: "第十課 山中寄情", words: ["唐", "恬", "罷", "暮", "掩", "柴", "扉", "歸", "畢", "陋", "傍", "確", "閒", "詠", "幽", "眠", "職", "吟", "曠"] },
              { title: "第十一課 與達駭黑熊走入山林", words: ["駭", "疤", "痕", "罐", "咚", "碰", "傾", "寮", "營", "殺", "崇", "置", "奄", "翼", "祈", "禱", "吼", "喉", "嚨"] },
              { title: "第十二課 荒島上的國王", words: ["烈", "暈", "昏", "艙", "途", "捲", "喪", "獸", "渾", "擱", "礁", "筏", "塌", "捏", "燒", "臼", "烤", "爐", "欲"] },
            ]
          },
          {
            id: 10,
            title: "第十冊",
            lessons: [
              { title: "第一課 你會怎麼回答？", words: ["簽", "遞", "傻", "瓜", "若", "續", "痺", "患", "握", "艱", "博", "聆", "埋", "稿", "雷", "擔", "談", "懸", "符"] },
              { title: "第二課 智救養馬人", words: ["匹", "怒", "廷", "妥", "諫", "閉", "覷", "犯", "罪", "仁", "政", "斥", "蒙", "羞", "懂", "委", "婉", "勸"] },
              { title: "第三課 真正的「聰明」", words: ["輛", "姍", "抵", "迅", "返", "率", "梭", "隼", "較", "贏", "逐", "遭", "評", "普", "價", "承", "搏"] },
              { title: "第四課 小記者，出動！", words: ["診", "繃", "緒", "疫", "篩", "偉", "雄", "補", "驟", "菊", "罩", "塵", "槌", "餘", "撥", "廓", "拼", "湊", "骨"] },
              { title: "第五課 奇幻光芒的祕密", words: ["盈", "浸", "稀", "儲", "寵", "寂", "螢", "彷", "彿", "悉", "賦", "龍", "冠", "鳳", "紋", "飾", "閱", "激", "湧"] },
              { title: "第六課 人「聲」就是戲", words: ["份", "睹", "杯", "奏", "盯", "燦", "魔", "嗓", "啞", "咳", "促", "喘", "吁", "伏", "唷", "須", "憂", "詮", "魅"] },
              { title: "第七課 題西林壁", words: ["淵", "凡", "擅", "亦", "橫", "側", "廬", "江", "寺", "霧", "瀰", "延", "含", "哲", "謂"] },
              { title: "第八課 你想做人魚嗎？", words: ["珊", "瑚", "積", "噸", "垃", "圾", "循", "菌", "鉤", "鏈", "孔", "倖", "鯨", "據", "宜", "估", "廢", "踐", "殼"] },
              { title: "第九課 海洋的殺手", words: ["涵", "葵", "鯊", "豚", "抹", "汐", "譟", "鏽", "錨", "牧", "窺", "筒", "琉", "璃", "凸", "襯", "托", "證", "玻"] },
              { title: "第十課 玉米人的奇蹟", words: ["蹟", "蕩", "吶", "洪", "誕", "沼", "澤", "豹", "栩", "跺", "葦", "堪", "洶", "鵡", "狼", "雅", "挑", "剔"] },
              { title: "第十一課 幸福的火苗", words: ["婪", "嚎", "群", "抖", "疼", "魂", "規", "違", "駕", "屑", "瀑", "瀉", "燃", "噬", "籠", "焰", "霆", "俯", "啄"] },
              { title: "第十二課 神農嘗百草", words: ["穀", "亡", "授", "臟", "誤", "眩", "燥", "咀", "嗚", "犧", "牲", "赭", "鞭", "檢", "藤", "摘", "佑"] },
            ]
          },
          {
            id: 11,
            title: "第十一冊",
            lessons: [
              { title: "第一課 跑道", words: ["級", "軸", "奪", "屈", "偏", "搬", "恨", "抑", "拒", "尷", "尬", "悔", "拱", "距", "默", "鬥", "扭", "猛", "愣"] },
              { title: "第二課 朱子治家格言", words: ["粥", "縷", "碗", "綢", "繆", "毋", "掘", "纏", "縛", "瓦", "缶", "蔬", "饈", "腹", "惠", "勿", "凡", "預", "悲"] },
              { title: "第三課 談遇見更好的自己", words: ["揭", "卓", "培", "裁", "瑣", "仲", "耕", "賺", "穎", "惋", "欠", "驕", "傲", "昨", "耘", "隔", "茁"] },
              { title: "第四課 臺灣美食詩選", words: ["鼎", "擠", "颳", "廚", "淋", "晒", "覆", "筍", "醃", "攪", "炸", "瑩", "饗", "宴", "彰", "煮", "豬"] },
              { title: "第五課 最好的味覺禮物", words: ["削", "沫", "茶", "嗅", "按", "舍", "熬", "砂", "混", "焦", "舀", "勺", "判", "熄", "騰", "啜", "淌", "沛", "舔"] },
              { title: "第六課 珍珠奶茶", words: ["歐", "榜", "嫁", "烹", "薯", "末", "勁", "稠", "遂", "添", "含", "脂", "鹽", "呈", "慣", "蹈", "徜", "徉"] },
              { title: "第七課 大小剛好的鞋子", words: ["緬", "甸", "踝", "絨", "濺", "襬", "弄", "恣", "批", "徑", "謹", "恰", "乏", "皆", "嗤", "嗯"] },
              { title: "第八課 狐假虎威", words: ["隙", "竄", "旨", "悠", "寓", "鷸", "狡", "窟", "猾", "騙", "偽", "誇", "辨", "謊", "諷", "惕", "察", "蔽", "虛"] },
              { title: "第九課 空城計", words: ["亭", "支", "誘", "縣", "懿", "魏", "旗", "幟", "崗", "姓", "倘", "僮", "薰", "撤", "諸", "葛", "慎", "丞"] },
              { title: "第十課 耶誕節", words: ["耶", "郊", "慈", "祥", "劈", "啪", "零", "厭", "倦", "辯", "私", "貧", "係", "趁", "稍", "烘", "衷", "鋼"] },
              { title: "第十一課 下午茶風波", words: ["楓", "恢", "潑", "莓", "廳", "額", "灌", "醉", "釀", "替", "諒", "脣", "奔", "乞", "某", "煥", "橇", "鈴", "迴"] },
              { title: "第十二課 祕密花園", words: ["異", "頰", "蓬", "勃", "逛", "庭", "肅", "薔", "薇", "瀰", "刮", "括", "螞", "蟻", "儘"] },
            ]
          },
          {
            id: 12,
            title: "第十二冊",
            lessons: [
              { title: "第一課 馬達加斯加，出發！", words: ["嶼", "獨", "馳", "輾", "櫛", "鱗", "幣", "莊", "瀕", "撒", "掠", "覓", "紳", "濛", "亢", "凌", "岌"] },
              { title: "第二課 沉睡的天空之城", words: ["址", "屏", "秘", "魯", "璀", "璨", "愜", "振", "氛", "序", "澎", "湃", "砌", "梯", "玄", "拴", "盎", "眸", "杏"] },
              { title: "第三課 走進太陽之城", words: ["萊", "瑞", "霍", "茅", "唯", "爆", "供", "府", "購", "碳", "騎", "駛", "箱", "嬉", "兵", "乒", "乓", "鬆", "欄"] },
              { title: "第四課 送友人", words: ["郭", "征", "茲", "蕭", "澈", "辭", "臥", "蹤", "逢", "抒", "泊", "暉", "摯", "誼"] },
              { title: "第五課 蚵鄉風情", words: ["蚵", "嬸", "攏", "柄", "笨", "拙", "疲", "憊", "鈔", "剖", "棚", "裹", "樁", "巡", "甦", "豎", "媒", "沸", "宛"] },
              { title: "第六課 童年‧夏日・棉花糖", words: ["碧", "疏", "凰", "株", "巔", "戀", "蔭", "紡", "緯", "纖", "裊", "袖", "鋁", "廠", "孜", "猶", "陰", "逝", "斑"] },
              { title: "第七課 我的少年夢", words: ["斜", "閣", "匱", "攤", "冥", "篷", "徒", "籌", "訝", "埡", "脈", "紮", "窸", "窣", "誦", "宇", "宙", "浩", "瀚"] },
              { title: "第八課 如何張開追夢的翅膀", words: ["瞻", "愚", "汲", "庶", "鍥", "垮", "嶄", "輩", "赴", "構", "諺", "羹", "坪", "斤", "貫", "拓"] },
              { title: "第九課 成為人生的開拓者", words: ["恭", "份", "荊", "棘", "俗", "窘", "溝", "闖", "涯", "曙", "帆", "槳"] },
            ]
          }
        ];

        // 2. 南一版 (完整資料)
        const DATA_NAN_YI = [
          {
            id: 1,
            title: "第一冊",
            lessons: [
              { title: "第一課 小船", words: ["小", "上", "走", "左", "右", "向", "魚", "也", "來", "加"] },
              { title: "第二課 印手印", words: ["開", "出", "招", "車", "子", "地", "花", "朵", "在", "笑"] },
              { title: "第三課 吹泡泡", words: ["泡", "玩", "大", "起", "好", "多", "我", "的", "你", "抱"] },
              { title: "第四課 你好", words: ["爸", "到", "青", "叫", "下", "那", "和", "要", "他", "朋", "友"] },
              { title: "第五課 外星人", words: ["外", "住", "個", "們", "這", "裡", "有", "沒", "是", "什", "麼"] },
              { title: "第六課 小金魚", words: ["金", "說", "句", "話", "兩", "都", "悄", "尾", "巴", "滿", "紅"] },
              { title: "第七課 紅紅的春", words: ["春", "貼", "呢", "了", "請", "天", "家", "把", "不", "房", "福"] },
            ]
          },
          {
            id: 2,
            title: "第二冊",
            lessons: [
              { title: "第一課 太陽是充電機", words: ["太", "充", "電", "雨", "過", "後", "為", "冬", "土", "草", "冒", "哭", "心"] },
              { title: "第二課 春雨是什麼顏色", words: ["顏", "色", "細", "著", "問", "鳥", "綠", "看", "藍", "空", "媽", "彩", "中", "虹"] },
              { title: "第三課 山中音樂會", words: ["音", "樂", "會", "坡", "忙", "布", "場", "入", "口", "河", "林", "間", "風", "跑"] },
              { title: "第四課 書是我的好朋友", words: ["書", "打", "跳", "陪", "去", "險", "海", "找", "歡", "神", "奇", "猜", "次", "誰", "跟"] },
              { title: "第五課 風喜歡和我玩", words: ["喜", "帶", "氣", "球", "始", "吹", "突", "然", "得", "高", "樹", "給", "可", "理", "只"] },
              { title: "第六課 鄰居的小孩", words: ["居", "孩", "常", "躲", "發", "現", "就", "頭", "回", "想", "但", "怎", "知", "道", "先"] },
              { title: "第七課 畫畫", words: ["畫", "愛", "送", "寫", "祝", "張", "臉", "感", "謝", "老", "師", "啊", "還", "漂", "亮"] },
              { title: "第八課 給松鼠的卡片", words: ["卡", "片", "秋", "採", "果", "吃", "飽", "方", "埋", "進", "很", "久", "嗎", "長", "敬"] },
              { title: "第九課 張奶奶的寶貝", words: ["奶", "貝", "早", "校", "園", "工", "作", "她", "邊", "汗", "學", "您", "樣", "當", "成"] },
              { title: "第十課 井裡的小青蛙", words: ["井", "隻", "除", "睡", "覺", "東", "西", "拍", "肚", "唉", "幾", "世", "界", "連", "裝"] },
              { title: "第十一課 吃星星的小鴨子", words: ["星", "面", "許", "池", "圈", "波", "紋", "見", "快", "告", "訴", "光", "拉", "怪", "呀"] },
              { title: "第十二課 快樂不止一半", words: ["止", "半", "羊", "田", "再", "瓜", "苗", "辛", "苦", "油", "能", "收", "甜", "分", "享"] },
            ]
          },
          {
            id: 3,
            title: "第三冊",
            lessons: [
              { title: "第一課 打招呼", words: ["呼", "白", "雲", "柔", "前", "游", "噴", "美", "麗", "柱", "試", "吸", "用", "力", "哇", "又", "第", "功"] },
              { title: "第二課 爬梯子", words: ["爬", "梯", "紙", "條", "線", "像", "身", "生", "迫", "及", "待", "站", "沿", "頂", "格", "哪", "才", "最"] },
              { title: "第三課 勇氣樹", words: ["勇", "教", "室", "棵", "葉", "克", "服", "害", "怕", "努", "完", "事", "倒", "時", "黑", "低", "聲", "故"] },
              { title: "第四課 一天的時間", words: ["塊", "圓", "形", "芝", "麻", "餅", "咬", "飯", "做", "課", "洗", "澡", "拾", "整", "包", "遊", "戲", "剩"] },
              { title: "第五課 小書蟲", words: ["蟲", "森", "動", "物", "王", "坐", "午", "停", "座", "急", "百", "科", "全", "原", "從", "此", "管", "種"] },
              { title: "第六課 從自己開始", words: ["自", "己", "沙", "撿", "垃", "圾", "眼", "膠", "對", "牠", "安", "吧", "如", "該", "留", "便", "減", "少"] },
              { title: "第七課 等兔子來撞樹", words: ["等", "兔", "撞", "農", "夫", "夏", "剛", "趕", "路", "幸", "運", "以", "守", "夜", "晚", "北", "搖"] },
              { title: "第八課 角和腳", words: ["角", "腳", "渴", "鹿", "喝", "影", "意", "卻", "獅", "追", "被", "枝", "掙", "脫", "速", "度", "直", "救"] },
              { title: "第九課 赤腳國王", words: ["赤", "國", "熱", "宮", "涼", "踩", "毯", "暖", "馬", "壞", "難", "定", "更", "隨", "主", "法", "於", "舒"] },
              { title: "第十課 去農場玩", words: ["群", "靜", "抬", "非", "趣", "近", "堆", "棉", "遠", "景", "忽", "聽", "揮", "慢", "依", "捨", "放", "假"] },
              { title: "第十一課 幸福湯圓", words: ["湯", "今", "至", "妹", "升", "陽", "因", "期", "盯", "米", "團", "粉", "南", "黃", "真", "呵", "接", "牛"] },
              { title: "第十二課 到野外上課", words: ["野", "本", "模", "型", "蜜", "蜂", "蝴", "蝶", "飛", "活", "圖", "筆", "料", "湖", "調", "迷", "逛", "兒"] },
            ]
          },
          {
            id: 4,
            title: "第四冊",
            lessons: [
              { title: "第一課 彩色心情", words: ["情", "候", "翠", "溜", "滑", "傳", "深", "泳", "淚", "火", "奔", "怒", "拋", "潔", "舞", "各", "同", "受"] },
              { title: "第二課 勇敢超人", words: ["敢", "超", "弟", "院", "正", "破", "所", "伸", "點", "重", "石", "消", "失", "合", "掉", "乾", "淨", "哥"] },
              { title: "第三課 小波氣球飛上天", words: ["綿", "已", "經", "輸", "鼓", "取", "越", "竟", "飄", "抓", "啦", "喊", "踢", "結", "變", "讓", "終", "冷"] },
              { title: "第四課 小水珠，去哪裡？", words: ["珠", "微", "醒", "甲", "瓢", "腰", "香", "掛", "閃", "晶", "串", "項", "鍊", "仙", "禮", "探", "幫", "姐"] },
              { title: "第五課 生日快樂", words: ["病", "睛", "份", "牽", "步", "段", "毛", "晃", "籃", "亭", "忍", "祕", "耳", "聞", "味", "浪", "寶", "清"] },
              { title: "第六課 給地球的一封信", words: ["封", "信", "親", "貴", "洋", "蝦", "植", "量", "汙", "染", "使", "決", "具", "資", "源", "費", "康", "復"] },
              { title: "第七課 傘", words: ["傘", "烏", "暗", "爺", "字", "謎", "語", "屋", "枴", "杖", "滴", "答", "叩", "嘻", "哈", "落", "街", "案"] },
              { title: "第八課 老園丁的話", words: ["丁", "公", "每", "認", "比", "客", "相", "興", "照", "皮", "摘", "立", "位", "新", "它", "欣", "賞", "妙"] },
              { title: "第九課 小小說書人", words: ["排", "介", "紹", "其", "賣", "帽", "蛋", "糕", "扶", "買", "休", "息", "拿", "精", "采", "希", "望", "讀"] },
              { title: "第十課 點金術", words: ["銀", "女", "願", "摸", "品", "指", "桌", "椅", "食", "年", "幼", "純", "慌", "並", "切", "狀", "明", "而"] },
              { title: "第十一課 我喜歡你", words: ["敗", "旁", "脖", "瞇", "密", "件", "特", "別", "唱", "歌", "練", "習", "彈", "琴", "講", "論", "颳"] },
              { title: "第十二課 如果，我的房間……", words: ["牆", "壁", "窗", "床", "鋪", "錯", "輪", "搬", "冰", "且", "交", "往", "刻", "顆", "鮮", "汁", "晨", "由"] },
            ]
          },
          {
            id: 5,
            title: "第五冊",
            lessons: [
              { title: "第一課 你好，新朋友", words: ["泥", "化", "雀", "輕", "羽", "衣", "脆", "髮", "處", "旅", "行", "平", "男", "朗", "足"] },
              { title: "第二課 我們的約定", words: ["廊", "訂", "班", "級", "約", "紛", "持", "記", "錄", "聊", "言", "烈", "些", "提", "愁"] },
              { title: "第三課 下課十分鐘", words: ["短", "鐘", "鬼", "鬧", "準", "朝", "蹈", "表", "暢", "無", "總", "響", "忘", "盡", "責"] },
              { title: "第四課 留住今天的太陽", words: ["指", "夕", "賽", "緊", "店", "逗", "轉", "露", "業", "專", "勝", "利", "悅", "乖", "溫"] },
              { title: "第五課 火大了", words: ["龍", "沖", "菱", "兄", "吐", "歪", "防", "警", "鈴", "注", "員", "傷", "死", "諒", "脾"] },
              { title: "第六課 我該怎麼辦？", words: ["幕", "杯", "撞", "流", "溼", "透", "雙", "胸", "負", "慌", "逃", "辦", "題", "灰", "剪"] },
              { title: "第七課 最年輕的奶奶", words: ["背", "斑", "皺", "懂", "凡", "梳", "夾", "藏", "捏", "摺", "仔", "藝", "術", "雖", "創"] },
              { title: "第八課 魔「髮」哥哥", words: ["魔", "圍", "巾", "視", "框", "誤", "愉", "數", "桶", "刀", "曾", "機", "鏡", "齊"] },
              { title: "第九課 穿白袍的醫生伯伯", words: ["醫", "穿", "袍", "戴", "筒", "啄", "備", "幹", "敲", "毒", "體", "淘", "蘋", "般", "藥"] },
              { title: "第十課 唉呀！誤會大了", words: ["極", "熊", "雪", "腦", "實", "根", "反", "射", "膚", "豬", "呆", "印", "象", "憶", "滾"] },
              { title: "第十一課 石虎的告白", words: ["額", "虎", "貓", "臺", "灣", "獨", "萬", "祖", "蛙", "捉", "類", "占", "雞", "肉", "威"] },
              { title: "第十二課 昆蟲的保命妙招", words: ["昆", "攻", "擊", "演", "保", "命", "翅", "敵", "周", "竹", "節", "逼", "技", "退", "屁"] },
            ]
          },
          {
            id: 6,
            title: "第六冊",
            lessons: [
              { title: "第一課 最美的模樣", words: ["撐", "首", "符", "膀", "鼻", "環", "搗", "亂", "恐", "尖", "嘴", "吼"] },
              { title: "第二課 玩玩具", words: ["鐵", "碗", "另", "彎", "鉤", "推", "羨", "慕", "娃", "捲", "躺", "裙", "擺", "參", "容"] },
              { title: "第三課 愛玉的變身術", words: ["炎", "玉", "凍", "薄", "暑", "品", "籽", "晒", "摸", "刺", "器", "袋", "綁", "搓", "糖"] },
              { title: "第四課 楊修猜字", words: ["名", "丞", "曹", "楊", "修", "智", "應", "官", "府", "差", "思", "報", "闊", "酪", "驚"] },
              { title: "第五課 唱反調", words: ["鞠", "躬", "弄", "文", "厲", "鬥", "千", "普", "睜", "閉", "錢", "偏", "察", "偷", "胡"] },
              { title: "第六課 一飛沖天", words: ["村", "猴", "抖", "造", "助", "展", "簧", "摔", "巨", "引", "觀", "咦", "松", "鼠", "混"] },
              { title: "第七課 井仔腳鹽田", words: ["盤", "擠", "燦", "爛", "鹽", "耙", "攪", "抹", "塔", "棋", "幢", "堂", "雕", "霞", "霄"] },
              { title: "第八課 和魚一起游泳", words: ["叔", "潛", "島", "浮", "珊", "瑚", "船", "航", "丑", "寬", "岸", "郵", "寄", "底"] },
              { title: "第九課 三峽老街藍染樂", words: ["峽", "隧", "古", "窄", "磚", "拱", "騎", "樓", "燈", "籠", "治", "示", "施", "獎", "傻"] },
              { title: "第十課 地球的眼淚", words: ["鹹", "之", "川", "蒸", "降", "令", "凝", "刷", "岩", "將", "或", "雜", "質", "積", "累"] },
              { title: "第十一課 枯木是大飯店", words: ["枯", "孤", "零", "義", "柴", "代", "適", "洞", "築", "巢", "菇", "腐", "沉", "斷", "僅"] },
              { title: "第十二課 騎樓", words: ["淋", "遮", "易", "側", "吞", "旗", "砂", "砌", "館", "建", "華", "社", "區", "擋", "商"] },
            ]
          },
          {
            id: 7,
            title: "第七冊",
            lessons: [
              { title: "第一課 窗口邊的臺灣欒樹", words: ["戶", "漫", "季", "素", "嫩", "繁", "墨", "姿", "簇", "週", "淡", "穫", "迎", "幅", "伴"] },
              { title: "第二課 奶奶的排骨粥", words: ["汽", "煮", "骨", "粥", "燙", "換", "即", "菜", "齒", "餐", "矯", "餓", "彷", "彿", "濃"] },
              { title: "第三課 充滿希望的五味屋", words: ["蓮", "式", "士", "拆", "民", "志", "酸", "辣", "存", "靠", "獲", "態", "與", "支", "未"] },
              { title: "第四課 玉山之歌", words: ["淺", "搧", "針", "縫", "嶼", "峰", "領", "拂", "頑", "奏", "曲", "溪", "聆", "翻"] },
              { title: "第五課 高舉臺灣之光", words: ["困", "舉", "挑", "戰", "爭", "佩", "斤", "紀", "震", "竭", "棄", "程", "捐", "驕", "傲"] },
              { title: "第六課 臺灣的驕傲", words: ["尺", "亞", "洲", "跨", "鋼", "護", "層", "鈔", "仍", "標", "融", "仰", "內", "俯", "煙"] },
              { title: "第七課 到此「藝」遊 陳碏", words: ["育", "晴", "陶", "目", "芒", "返", "劇", "斗", "索", "禁", "渡", "念", "麵", "統", "值"] },
              { title: "第八課 四季的頭髮", words: ["陣", "披", "嚇", "眶", "乘", "龐", "絲", "板", "辮", "踮", "挺", "散", "里"] },
              { title: "第九課 阿白觀察記", words: ["促", "振", "碎", "者", "偶", "褐", "巧", "塑", "凶", "繞", "衝", "雷", "牌", "豐", "擾"] },
              { title: "第十課 老鼠嫁女兒", words: ["妞", "郎", "丈", "哄", "眾", "羞", "強", "嫁", "架", "初", "丟", "既", "轎", "隊", "伍"] },
              { title: "第十一課 豆粥婆婆", words: ["婆", "頰", "陰", "血", "哀", "嘗", "蓆", "栗", "橫", "蟹", "缸", "漆", "黏", "痛", "拚"] },
              { title: "第十二課 戴斗笠的地藏", words: ["貧", "妻", "茫", "算", "祈", "繼", "續", "宜", "耐", "離", "傍", "隱", "託", "納", "漸"] },
            ]
          },
          {
            id: 8,
            title: "第八冊",
            lessons: [
              { title: "第一課 𪹚龍慶元宵", words: ["慶", "懷", "祥", "儀", "序", "毫", "挨", "吉", "潮", "炸", "旺", "爆", "梭", "徵", "揚"] },
              { title: "第二課 看戲", words: ["驗", "拳", "谷", "扮", "勢", "芳", "則", "搭", "配", "達", "製", "效", "兵", "優", "需"] },
              { title: "第三課 舞吧！小飛魚", words: ["甩", "褲", "童", "贏", "識", "族", "尤", "勵", "飾", "甚", "顧", "慮", "肯", "邀", "豪"] },
              { title: "第四課 蝶之生", words: ["蛹", "蟻", "移", "蛻", "煉", "絕", "曉", "殼", "奮", "晾", "翩"] },
              { title: "第五課 活出生命奇蹟", words: ["健", "肢", "激", "蹦", "父", "扎", "弓", "異", "喪", "豚", "嘆", "執", "限", "蹟"] },
              { title: "第六課 走過就知道", words: ["裂", "通", "付", "關", "糊", "坦", "危", "吊", "壯", "膽", "腿", "軟", "扛", "晰", "懼"] },
              { title: "第七課 不一樣的母親花", words: ["瓣", "絹", "束", "莖", "政", "議", "致", "橙", "昏", "凋", "憂", "雅", "茶", "跪", "誠"] },
              { title: "第八課 屋頂上的小貓", words: ["吵", "歲", "慰", "制", "必", "須", "煤", "瑩", "養", "替", "疼", "箱", "撒", "嬌", "善"] },
              { title: "第九課 用一公斤愛嘉明湖", words: ["泊", "拔", "澈", "湛", "夢", "幻", "永", "登", "踏", "填", "喚", "折", "浹", "喘", "隔"] },
              { title: "第十課 想像與發明", words: ["慧", "燃", "誕", "啟", "境", "考", "材", "攜", "聯", "絡", "彼", "網", "計", "鍵"] },
              { title: "第十一課 小事物 大驚奇", words: ["譜", "欄", "煎", "廚", "尋", "靈", "縮", "組", "匠", "蔭", "悠", "構", "集", "改"] },
              { title: "第十二課 九蛙傳奇", words: ["巫", "衰", "判", "旱", "導", "災", "疊", "陷", "弱", "端", "魂", "聚", "順", "寧", "詳"] },
            ]
          },
          {
            id: 9,
            title: "第九冊",
            lessons: [
              { title: "第一課 蚊帳大使", words: ["蚊", "帳", "洲", "瘧", "疾", "死", "叮", "存", "募", "集", "寄", "贈", "獎", "狀", "藏", "誌", "基", "赴"] },
              { title: "第二課 從空中看臺灣", words: ["德", "乎", "血", "攝", "颱", "錄", "哀", "戀", "縱", "臍", "禍", "殘", "檳", "榔", "降", "縫", "汙", "斷"] },
              { title: "第三課 攀岩高手", words: ["峭", "勁", "聳", "飢", "隱", "扯", "銳", "箭", "韌", "虬", "鬚", "茂", "止", "蔓", "藉", "豐", "挫", "折"] },
              { title: "第四課 恆久的美", words: ["恆", "澄", "穗", "養", "源", "藝", "樸", "堆", "檢", "巾", "痠", "素", "尊", "嚴", "勞", "怨", "慷", "慨", "滋"] },
              { title: "第五課 它抓得住你——商標的故事", words: ["譽", "務", "聯", "核", "申", "局", "松", "註", "冊", "企", "毅", "歷", "英", "銷", "售", "勝", "霸", "項"] },
              { title: "第六課 故事「動」起來", words: ["娛", "汽", "哨", "典", "框", "劇", "父", "責", "判", "鳴", "穎", "獲", "佳", "膩", "效", "隊", "益", "貌", "官", "增"] },
              { title: "第七課 為生命找出口", words: ["逆", "穩", "憐", "競", "抗", "逸", "鄰", "脈", "絡", "緻", "弱", "噴", "嚏", "織", "碌", "盎", "膽", "圈", "疲"] },
              { title: "第八課 最勇敢的女孩", words: ["坦", "性", "恐", "怖", "組", "占", "播", "控", "制", "傷", "攻", "擊", "權", "脅", "復", "武", "撼", "懼"] },
              { title: "第九課 在挫折中成長", words: ["維", "戰", "崎", "嶇", "拳", "癌", "症", "銅", "牌", "屢", "減", "予", "幼", "椰", "即", "腐", "衝", "鍛", "鍊"] },
              { title: "第十課 山中寄情", words: ["唐", "恬", "罷", "暮", "掩", "柴", "扉", "歸", "畢", "陋", "傍", "確", "閒", "詠", "幽", "眠", "職", "吟", "曠"] },
              { title: "第十一課 與達駭黑熊走入山林", words: ["駭", "疤", "痕", "罐", "咚", "碰", "傾", "寮", "營", "殺", "崇", "置", "奄", "翼", "祈", "禱", "吼", "喉", "嚨"] },
              { title: "第十二課 荒島上的國王", words: ["列", "暈", "昏", "艙", "途", "捲", "喪", "獸", "渾", "擱", "礁", "筏", "塌", "捏", "燒", "臼", "烤", "爐", "欲"] },
            ]
          },
          {
            id: 10,
            title: "第十冊",
            lessons: [
              { title: "第一課 你會怎麼回答？", words: ["簽", "遞", "傻", "瓜", "若", "續", "痺", "患", "握", "博", "聆", "肢", "埋", "擔", "談", "懸", "章", "符"] },
              { title: "第二課 智救養馬人", words: ["匹", "怒", "廷", "妥", "諫", "閉", "覷", "犯", "罪", "仁", "政", "斥", "蒙", "羞", "懂", "委", "婉", "勸"] },
              { title: "第三課 真正的「聰明」", words: ["輛", "屢", "冊", "抵", "返", "率", "鄰", "領", "梭", "隼", "較", "贏", "逐", "旦", "遭", "評", "普", "承", "搏"] },
              { title: "第四課 小記者，出動！", words: ["診", "繃", "緒", "疫", "篩", "偉", "雄", "補", "驟", "菊", "罩", "塵", "槌", "餘", "撥", "廓", "拼", "湊", "骨"] },
              { title: "第五課 奇幻光芒的祕密", words: ["盈", "浸", "稀", "儲", "寵", "寂", "螢", "彷", "彿", "悉", "賦", "詞", "龍", "冠", "鳳", "紋", "飾", "閱", "湧"] },
              { title: "第六課 人「聲」就是戲", words: ["睹", "杯", "奏", "魔", "脆", "嗓", "啞", "咳", "促", "喘", "吁", "伏", "唷", "須", "憂", "增", "詮", "魅"] },
              { title: "第七課 真相？真相！", words: ["證", "檢", "鯨", "殖", "哺", "乳", "胎", "漲", "汐", "週", "撈", "濾", "省", "施", "哲", "圈", "抵"] },
              { title: "第八課 你想做人魚嗎？", words: ["涵", "珊", "瑚", "鯊", "豚", "抹", "噴", "躁", "鏽", "錨", "牧", "窺", "筒", "琉", "璃", "凸", "襯", "托", "玻"] },
              { title: "第九課 海洋的殺手", words: ["積", "頓", "垃", "圾", "謎", "貨", "循", "菌", "鉤", "鏈", "孔", "倖", "據", "宜", "估", "廢", "踐", "益", "殼"] },
              { title: "第十課 玉米人的奇蹟", words: ["蹟", "蕩", "洪", "誕", "沼", "澤", "豹", "效", "栩", "跺", "蘆", "葦", "堪", "溝", "武", "狼", "絕", "挑", "剔"] },
              { title: "第十一課 幸福的火苗", words: ["婪", "嚎", "群", "疼", "魂", "規", "違", "駕", "橫", "屑", "暴", "瀉", "燃", "噬", "延", "籠", "焰", "霆", "啄"] },
              { title: "第十二課 神農嘗百草", words: ["穀", "亡", "授", "臟", "誤", "眩", "燥", "咀", "症", "鳴", "犧", "牲", "赭", "鞭", "藤", "蔓", "摘", "責", "佑"] },
            ]
          },
          {
            id: 11,
            title: "第十一冊",
            lessons: [
              { title: "第一課 跑道", words: ["級", "軸", "奪", "屈", "偏", "搬", "恨", "抑", "拒", "尷", "尬", "悔", "拱", "距", "默", "門", "扭", "猛", "愣"] },
              { title: "第二課 朱子治家格言", words: ["粥", "縷", "碗", "綢", "繆", "毋", "掘", "纏", "縛", "瓦", "缶", "蔬", "饈", "腹", "患", "勿", "凡", "預", "悲"] },
              { title: "第三課 談遇見更好的自己", words: ["揭", "卓", "培", "裁", "瑣", "仲", "耕", "賺", "穎", "惋", "欠", "驕", "傲", "咋", "轉", "隔", "茁"] },
              { title: "第四課 臺灣美食詩選", words: ["鼎", "擠", "颳", "廚", "淋", "曬", "覆", "筍", "醃", "攪", "炸", "瑩", "饗", "宴", "彰", "煮", "豬"] },
              { title: "第五課 最好的味覺禮物", words: ["削", "沫", "茶", "嗅", "按", "舍", "熬", "砂", "混", "焦", "舀", "勺", "判", "熄", "騰", "啜", "淌", "沛", "舔"] },
              { title: "第六課 珍珠奶茶", words: ["歐", "榜", "嫁", "烹", "薯", "末", "勁", "稠", "逐", "添", "含", "脂", "鹽", "呈", "慣", "踏", "徜", "徉"] },
              { title: "第七課 大小剛好的鞋子", words: ["仰", "緬", "甸", "踝", "絨", "濺", "襯", "弄", "恣", "批", "徑", "謹", "恰", "乏", "皆", "嗤", "嗯"] },
              { title: "第八課 狐假虎威", words: ["隙", "竄", "旨", "悠", "寓", "鷸", "狡", "窟", "猾", "騙", "偽", "誇", "辨", "謊", "諷", "惕", "察", "蔽", "虛"] },
              { title: "第九課 空城計", words: ["亭", "支", "誘", "縣", "懿", "魏", "旗", "幟", "崗", "姓", "倘", "僮", "薰", "撤", "諸", "葛", "慎", "丞"] },
              { title: "第十課 耶誕節", words: ["耶", "郊", "慈", "祥", "劈", "啪", "零", "獻", "倦", "辯", "私", "貧", "係", "趁", "稍", "烘", "衷", "鋼"] },
              { title: "第十一課 下午茶風波", words: ["楓", "恢", "廢", "莓", "廳", "額", "灌", "醉", "釀", "替", "諒", "脣", "奔", "乞", "某", "煥", "棍", "鈴", "迴"] },
              { title: "第十二課 祕密花園", words: ["異", "煩", "蓬", "勃", "斑", "庭", "肅", "薔", "薇", "瀰", "刮", "括", "螞", "蟻", "儘"] },
            ]
          },
          {
            id: 12,
            title: "第十二冊",
            lessons: [
              { title: "第一課 遊走在世界的市場裡", words: ["遛", "逛", "繫", "陌", "俐", "醬", "咖", "啡", "倚", "貨", "築", "恨", "贈", "剌", "豔", "辣", "襯", "托", "彰", "購"] },
              { title: "第二課 到不來梅當個樂師吧", words: ["疆", "港", "摒", "諺", "罐", "驢", "馱", "衰", "盜", "頤", "怖", "嘶", "啞", "嗓", "嚥", "爪", "梁", "喻", "惦", "初"] },
              { title: "第三課 大小剛好的鞋子", words: ["踝", "絨", "號", "濺", "屈", "嫌", "埃", "縱", "攝", "氏", "逢", "倨", "嗤", "欠", "陋", "寡", "嗯"] },
              { title: "第四課 王戎辨苦李", words: ["戎", "李", "劉", "彙", "晉", "軼", "撰", "遣", "辭", "栩", "唯", "濬", "致", "纍", "澀", "賅", "敘", "述"] },
              { title: "第五課 童年‧夏日‧棉花糖", words: ["巷", "凰", "葵", "巔", "盎", "梭", "緯", "勺", "晶", "瑩", "攪", "拌", "剪", "裁", "鋁", "防", "鈴", "逝", "恆", "恬"] },
              { title: "第六課 兒童的保護傘", words: ["輔", "仆", "傾", "窘", "貧", "兼", "職", "畢", "飢", "刊", "斤", "貸", "捍", "含", "歧", "抑", "濟", "績", "凌", "妨"] },
              { title: "第七課 你為何而學", words: ["驅", "衷", "迭", "滯", "崗", "謂", "秉", "俱", "誕", "旺", "鑰", "匙", "挫", "蔽", "域", "侷", "掘", "釐", "燃"] },
              { title: "第八課 我的武俠大夢", words: ["駕", "拈", "豬", "蜘", "蛛", "詫", "啼", "抉", "苛", "塌", "稿", "湛", "鍛", "旨", "柢", "茁", "懵", "驟"] },
              { title: "第九課 雛鳥試飛", words: ["雛", "膛", "芒", "啾", "拙", "懼", "凶", "漲", "鷗", "嘹", "滔", "襲", "陷", "阱"] },
            ]
          }
        ];

        // 3. 翰林版 (範例結構 - 請在此填入實際資料)
        const DATA_HAN_LIN = [
          {
            id: 1,
            title: "第一冊",
            lessons: [
              { title: "第一課 一起走", words: ["起", "走", "你", "在", "左", "我", "右", "和", "向", "前"] },
              { title: "第二課 大風吹", words: ["大", "風", "吹", "們", "來", "玩", "不", "停", "的", "跑"] },
              { title: "第三課 火車過山洞", words: ["火", "車", "山", "洞", "個", "又", "出", "小", "堆", "開", "心"] },
              { title: "第四課 請問", words: ["請", "問", "草", "天", "有", "多", "高", "星", "少", "太", "了", "水", "去"] },
              { title: "第五課 七彩的滑梯", words: ["彩", "上", "好", "想", "爬", "看", "沒", "棉", "花", "下", "泡", "池"] },
              { title: "第六課 秋千", words: ["秋", "千", "子", "空", "說", "早", "田", "是", "誰", "陪", "他"] },
              { title: "第七課 回音", words: ["回", "音", "到", "谷", "叫", "人", "嗎", "也", "笑", "哈"] },
            ]
          },
          {
            id: 2,
            title: "第二冊",
            lessons: [
              { title: "第一課 春天來了", words: ["春", "裡", "綠", "美", "呀", "媽", "弟", "坐", "還", "路", "著", "氣", "暖", "就"] },
              { title: "第二課 小雨", words: ["雨", "唱", "歌", "過", "河", "輕", "快", "樂", "街", "興", "魚", "朋", "友", "招", "手"] },
              { title: "第三課 美好的一天", words: ["涼", "地", "真", "朵", "拍", "照", "粉", "紅", "色", "衣", "服", "妹", "像", "會", "動", "帶", "給"] },
              { title: "第四課 送什麼呢", words: ["送", "什", "呢", "生", "日", "要", "爸", "姐", "束", "做", "張", "卡", "片", "畫", "寫", "話"] },
              { title: "第五課 窗外的小麻雀", words: ["窗", "外", "麻", "雀", "找", "字", "但", "課", "才", "可", "以", "急", "跳", "先", "再"] },
              { title: "第六課 毛毛蟲過河", words: ["毛", "陽", "光", "兒", "站", "中", "游", "青", "幫", "忙", "面", "葉", "船", "拉", "推"] },
              { title: "第七課 借筆", words: ["借", "筆", "跟", "她", "把", "拿", "很", "都", "每", "家", "今", "自", "己", "背", "書", "包"] },
              { title: "第八課 兩張卡片", words: ["兩", "教", "室", "見", "桌", "等", "意", "思", "忍", "住", "忽", "然", "啊", "忘", "用", "吧"] },
              { title: "第九課 友情的枴杖", words: ["情", "杖", "時", "受", "傷", "疼", "直", "步", "健", "康", "覺", "得", "溫", "雙"] },
              { title: "第十課 一棵小樹", words: ["棵", "樹", "打", "雷", "土", "抖", "害", "怕", "長", "咬", "羊", "吃", "勇", "敢", "這"] },
              { title: "第十一課 鉛筆和橡皮擦", words: ["鉛", "皮", "常", "錯", "久", "哭", "加", "油", "試", "後", "正", "漂", "亮", "進", "需", "學"] },
              { title: "第十二課 上臺說故事", words: ["故", "事", "期", "全", "班", "記", "麼", "能", "決", "定", "狼", "間", "完", "段", "物", "同"] },
            ]
          },
          {
            id: 3,
            title: "第三冊",
            lessons: [
              { title: "第一課 我的心情", words: ["候", "颳", "冷", "躲", "閃", "電", "難", "烏", "雲", "密", "布", "盆", "充", "滿", "放", "晴", "現", "虹"] },
              { title: "第二課 彩色的天空", words: ["老", "師", "新", "希", "望", "卻", "始", "緊", "因", "為", "知", "道", "怎", "消", "失", "習", "最", "掛"] },
              { title: "第三課 國王做新衣", words: ["國", "王", "喜", "歡", "穿", "只", "件", "點", "改", "領", "越", "設", "計", "發", "方", "法", "分", "享"] },
              { title: "第四課 水草下的呱呱", words: ["呱", "聞", "聲", "猜", "蛙", "別", "靠", "近", "抓", "如", "果", "乖", "腦", "袋", "瓜", "證", "明", "頂"] },
              { title: "第五課 沙灘上的畫", words: ["沙", "灘", "海", "邊", "退", "遠", "螃", "蟹", "愛", "注", "夕", "腳", "丫", "橫", "留", "印", "挖", "麗"] },
              { title: "第六課 草叢裡的星星", words: ["月", "奶", "晚", "飯", "散", "屋", "竹", "林", "頭", "溪", "旁", "暗", "眼", "睛", "那", "聚", "成", "顆"] },
              { title: "第七課 不一樣的美食", words: ["樣", "食", "郊", "活", "奇", "筒", "香", "味", "便", "當", "盒", "客", "清", "節", "保", "平", "安", "南"] },
              { title: "第八課 美食分享日", words: ["介", "圓", "形", "白", "紙", "米", "變", "軟", "搶", "材", "蝦", "線", "各", "種", "菜", "接", "聽", "更"] },
              { title: "第九課 好味道", words: ["黃", "沖", "澡", "蘿", "蔔", "哪", "粒", "熱", "浴", "蒸", "胖", "名", "苔", "蛋", "蔬", "通", "細", "淡"] },
              { title: "第十課 加加減減", words: ["減", "表", "讀", "認", "識", "謎", "答", "搖", "百", "嘴", "哥", "數", "題", "趕", "突", "異", "口", "對"] },
              { title: "第十一課 奇怪的門", words: ["怪", "門", "扇", "立", "刻", "閒", "馬", "闖", "耳", "主", "播", "報", "力", "竟", "巴", "東", "西", "底"] },
              { title: "第十二課 詠鵝", words: ["念", "曲", "項", "浮", "掌", "撥", "波", "詩", "作", "首", "指", "伸", "脖", "身", "體", "隻", "倒", "肚"] },
            ]
          },
          {
            id: 4,
            title: "第四冊",
            lessons: [
              { title: "第一課 種子旅行真奇妙", words: ["旅", "行", "妙", "公", "園", "針", "尖", "狗", "士", "貓", "探", "險", "黑", "傘", "由", "哇", "世", "界"] },
              { title: "第二課 小水滴愛上探險", words: ["滴", "躺", "次", "落", "荷", "珍", "珠", "第", "被", "轉", "甩", "浪", "救", "植", "提", "漠", "令", "及"] },
              { title: "第三課 紫斑蝶向北飛", words: ["紫", "北", "悄", "擔", "翅", "膀", "讓", "溜", "滑", "梯", "碰", "遇", "鳥", "終", "於", "木", "些", "伴"] },
              { title: "第四課 一場雨", words: ["場", "農", "夫", "渴", "稻", "喝", "飽", "洗", "蚯", "蚓", "扭", "尾", "泥", "蝌", "蚪", "努", "爺", "剛"] },
              { title: "第五課 笑容回來了", words: ["容", "丟", "負", "責", "收", "漸", "臉", "雖", "換", "工", "總", "親", "切", "慢", "利", "合", "式", "露"] },
              { title: "第六課 好好的說話", words: ["從", "臺", "夠", "昨", "球", "捧", "腹", "告", "訴", "整", "廁", "所", "踢", "足", "比", "校", "信", "祝"] },
              { title: "第七課 色彩變變變", words: ["調", "盤", "配", "藍", "顏", "魔", "料", "幾", "已", "經", "趣", "呵", "將", "混", "橙", "棒", "神"] },
              { title: "第八課 孵蛋的男孩", words: ["男", "孩", "靜", "晨", "傳", "雞", "吵", "雜", "女", "窩", "根", "羽", "啄", "母", "求", "助", "凡"] },
              { title: "第九課 點亮世界的人", words: ["歲", "燈", "賣", "非", "貴", "買", "燒", "壞", "功", "費", "絲", "敗", "實", "驗", "呼", "良", "持", "宜"] },
              { title: "第十課 醜小鴨", words: ["醜", "鴨", "其", "特", "抱", "破", "碗", "煩", "雪", "餓", "縮", "孤", "單", "掉", "淚", "鵝", "飛", "迎"] },
              { title: "第十一課 蜘蛛救蛋", words: ["蜘", "蛛", "鴿", "裂", "痕", "拜", "託", "寶", "貝", "處", "補", "內", "石", "算", "吐", "顧", "離"] },
              { title: "第十二課 玉兔搗藥", words: ["玉", "兔", "搗", "藥", "姑", "娘", "養", "仙", "重", "鬧", "桂", "砍", "嚇", "棍", "操", "夜", "運"] },
            ]
          },
          {
            id: 5,
            title: "第五冊",
            lessons: [
              { title: "第一課 時間是什麼", words: ["待", "牠", "吞", "寸", "碌", "奔", "斑", "實", "彈", "樂", "它", "短", "悲", "傷", "永"] },
              { title: "第二課 明天再寫", words: ["週", "休", "假", "連", "業", "午", "並", "提", "醒", "拖", "蜜", "桃", "嘟", "嘴", "房"] },
              { title: "第三課 提早五分鐘", words: ["統", "計", "票", "角", "板", "本", "況", "因", "及", "文", "具", "理", "此", "準", "備"] },
              { title: "第四課 猴子的數學", words: ["古", "懂", "居", "群", "省", "費", "商", "量", "窮", "桶", "怒", "亂", "增", "胡", "摸"] },
              { title: "第五課 便利貼的妙用", words: ["貼", "年", "級", "使", "何", "隨", "隔", "睡", "效", "序", "而", "且", "排", "箱", "條"] },
              { title: "第六課 小鉛筆大學問", words: ["黏", "木", "製", "部", "混", "斷", "解", "機", "器", "另", "治", "枝", "桿", "擦", "削"] },
              { title: "第七課 風的味道", words: ["鹹", "蔚", "航", "乘", "橇", "坡", "野", "滾", "閉", "深", "吸", "欣", "賞", "景", "瞞"] },
              { title: "第八課 寄居蟹找新家", words: ["寄", "蟹", "灘", "螃", "堆", "杯", "類", "撿", "瓶", "蓋", "淨", "志", "品", "應"] },
              { title: "第九課 阿塱壹古道", words: ["挑", "交", "導", "叢", "喊", "投", "繼", "續", "岸", "淺", "捲", "沿", "踩", "座", "般"] },
              { title: "第十課 秋千上的婚禮", words: ["婚", "禮", "盪", "服", "代", "福", "結", "束", "酒", "敬", "舞", "習", "俗", "惜", "互"] },
              { title: "第十一課 一路平安", words: ["除", "嬸", "煙", "炮", "附", "店", "息", "修", "廠", "壞", "檢", "查", "擺", "幸", "零"] },
              { title: "第十二課 不一樣的團圓", words: ["團", "窗", "剩", "默", "匆", "視", "訊", "叔", "逗", "堂", "娃", "壓", "錢", "透", "握"] },
            ]
          },
          {
            id: 6,
            title: "第六冊",
            lessons: [
              { title: "第一課 拔不起來的筆", words: ["拔", "牆", "壁", "往", "究", "父", "練", "肯", "願", "即", "專", "仍", "牢", "嚇", "勁"] },
              { title: "第二課 還差一點", words: ["差", "擋", "祕", "藏", "管", "橫", "埋", "模", "感", "奮", "示", "範", "苦", "讚", "微"] },
              { title: "第三課 用膝蓋跳舞的女孩", words: ["演", "姿", "病", "引", "克", "肢", "夾", "琴", "雙", "骨", "敲", "疼", "痛", "戰", "環"] },
              { title: "第四課 靜靜的淡水河", words: ["廣", "松", "妳", "染", "媚", "市", "映", "躍", "茫", "暮", "祥", "耀", "金", "泰", "銀"] },
              { title: "第五課 茶鄉鹿谷", words: ["茶", "鄉", "城", "參", "烏", "龍", "程", "傅", "摘", "晒", "酵", "乾", "燥", "嘆", "驗"] },
              { title: "第六課 月世界之旅", words: ["之", "境", "懷", "訪", "目", "丘", "象", "灰", "許", "紋", "濃", "密", "漿", "驚", "集"] },
              { title: "第七課 做泡菜", words: ["漬", "疑", "惑", "產", "適", "益", "腸", "健", "康", "裝", "封", "厲", "騙", "承", "貪"] },
              { title: "第八課 行人的守護者", words: ["護", "者", "展", "潑", "談", "秩", "倍", "疾", "徐", "抬", "胸", "或", "某", "扮", "型"] },
              { title: "第九課 就愛兩兩在一起", words: ["湯", "筷", "慣", "較", "圍", "餐", "套", "煮", "端", "免", "取", "垃", "圾", "化", "舉"] },
              { title: "第十課 飛行員和小王子", words: ["員", "幕", "無", "際", "幅", "帽", "圖", "蛇", "瞪", "呆", "揮", "既", "胃", "瞧", "豎"] },
              { title: "第十一課 畫龍點睛", words: ["維", "肖", "寺", "尚", "困", "擾", "邀", "逼", "孫", "追", "旦", "相", "朗", "布", "蹤"] },
              { title: "第十二課 掉進一個兔子洞", words: ["夏", "聊", "幻", "糕", "跌", "央", "鼠", "咦", "刺", "牌", "后", "脾", "令", "夢", "兵"] },
            ]
          },
          {
            id: 7,
            title: "第七冊",
            lessons: [
              { title: "第一課 美麗島", words: ["島", "唾", "沫", "忠", "衛", "寒", "椰", "隊", "蕉", "街", "灣", "甜", "糖", "童"] },
              { title: "第二課 請到我的家鄉來", words: ["泉", "抹", "訝", "牙", "齒", "架", "速", "彷", "彿", "汽", "區", "恐", "陀", "螺", "聚"] },
              { title: "第三課 鏡頭下的家鄉", words: ["鏡", "軌", "樓", "與", "耕", "耘", "蔬", "鼓", "腮", "烤", "柳", "丁", "粉", "網", "錄"] },
              { title: "第四課 飛行夢", words: ["兄", "翔", "鷹", "論", "控", "制", "命", "義", "標", "良", "研", "靈", "升", "紀", "碑"] },
              { title: "第五課 月光下", words: ["掛", "皎", "凝", "曾", "考", "輪", "徘", "徊", "瑤", "妝", "科", "登", "循", "尋", "案"] },
              { title: "第六課 又遠又近的月亮", words: ["館", "億", "隕", "撞", "擊", "坑", "射", "狀", "距", "萬", "里", "均", "騎", "餅", "揭"] },
              { title: "第七課 松鼠先生的麵包", words: ["麵", "焦", "揉", "批", "爐", "徵", "啟", "禁", "沾", "依", "度", "滋", "必"] },
              { title: "第八課 平凡的大俠", words: ["俠", "頓", "江", "鞋", "溼", "柱", "止", "措", "撐", "概", "折", "根", "脫", "愣", "帥"] },
              { title: "第九課 王子折箭", words: ["箭", "善", "民", "爭", "復", "祈", "惱", "鬥", "博", "弓", "欺", "惡", "懶", "晉", "盡"] },
              { title: "第十課 海中的熱帶雨林", words: ["珊", "瑚", "礁", "積", "存", "稱", "株", "縫", "隙", "繽", "紛", "捕", "撈", "汙", "藻"] },
              { title: "第十一課 美食島", words: ["闊", "鯊", "拼", "虎", "鯨", "叼", "餵", "嘗", "鮮", "籠", "沉", "豚", "鑽", "纏", "潮"] },
              { title: "第十二課 寧靜的音樂會", words: ["寧", "譯", "脣", "達", "愉", "悅", "章", "齊", "載", "嘉", "賓", "辦", "優", "籟"] },
            ]
          },
          {
            id: 8,
            title: "第八冊",
            lessons: [
              { title: "第一課 稻間鴨", words: ["苗", "雄", "赳", "昂", "巡", "呷", "甲", "喚", "禾", "豐", "季", "穗", "燦"] },
              { title: "第二課 綠色魔法學校", words: ["建", "築", "致", "棟", "囪", "強", "覽", "塔", "設", "悶", "施", "簾", "瓢", "僅", "碳"] },
              { title: "第三課 石虎兄妹", words: ["傍", "橘", "敏", "捷", "朝", "舍", "伏", "蒼", "翠", "巨", "周", "臨", "黯", "溪", "迴"] },
              { title: "第四課 阿里棒棒", words: ["艘", "舟", "列", "戴", "盔", "召", "賜", "饒", "佑", "順", "串", "激", "共", "餘", "予"] },
              { title: "第五課 快樂兒童日", words: ["慶", "褲", "華", "披", "紗", "袍", "巾", "袖", "鯉", "庭", "旗", "偶", "未", "翁"] },
              { title: "第六課 阿公的祕密", words: ["簇", "碎", "彎", "層", "鋪", "漫", "遍", "潔", "桐", "瞬", "踮", "亭", "芝", "磨", "擂"] },
              { title: "第七課 棒球英雄夢", words: ["曉", "賽", "弱", "哀", "准", "觸", "振", "局", "反", "輸", "討", "支", "壘", "菠", "勝"] },
              { title: "第八課 夢幻全壘打", words: ["領", "喘", "愈", "噪", "拚", "衝", "猶", "豫", "膽", "插", "腰", "贏", "硬", "挨", "罵"] },
              { title: "第九課 單車遊日月潭", words: ["盛", "劃", "選", "途", "霧", "舒", "緩", "巧", "透", "棧", "捉", "似", "眺", "秀", "趟"] },
              { title: "第十課 孫悟空三借芭蕉扇", words: ["芭", "焰", "擔", "搧", "熄", "獨", "嫂", "菩", "薩", "丹", "關", "椅", "訣", "乃", "聖"] },
              { title: "第十一課 最後一片葉子", words: ["租", "蒙", "瘦", "肺", "炎", "咳", "醫", "危", "嚴", "藤", "磚", "薄", "賺", "搬", "梯"] },
              { title: "第十二課 閱讀課", words: ["閱", "扶", "捐", "烈", "犧", "牲", "踴", "穫", "任", "務", "鐘", "響", "欄"] },
            ]
          },
          {
            id: 9,
            title: "第九冊",
            lessons: [
              { title: "第一課 你我之間", words: ["堅", "耐", "勞", "元", "蝟", "擁", "繩", "刷", "膏", "遭", "係", "充", "供", "凸", "彼", "協", "融", "洽", "諦"] },
              { title: "第二課 風起，大家都在", words: ["笛", "奏", "簡", "旋", "律", "縈", "繞", "梢", "廊", "熟", "悉", "諧", "階", "須", "絮", "伍", "威"] },
              { title: "第三課 廉頗與藺相如", words: ["璧", "歸", "諸", "侯", "挺", "官", "軍", "羞", "辱", "懦", "恥", "權", "勢", "攻", "君", "鎮", "愧", "荊", "肝"] },
              { title: "第四課 來場快樂的桌遊", words: ["筍", "廳", "眾", "據", "逐", "棋", "撲", "富", "純", "寓", "超", "炒", "氛", "齡", "技", "例", "憶", "培", "患"] },
              { title: "第五課 超級英雄", words: ["英", "采", "揚", "媲", "搜", "劇", "螢", "拯", "預", "脈", "院", "授", "犯", "吔", "違", "司", "潤", "愕", "創"] },
              { title: "第六課 世足賽的贏家", words: ["盃", "缺", "席", "塑", "廢", "質", "飲", "掩", "焚", "熔", "抽", "紡", "極", "複", "織", "耗", "至", "摩", "屆"] },
              { title: "第七課 美景閒情──詩兩首", words: ["返", "寨", "曠", "寂", "茂", "鳴", "澗", "悠", "乎", "谷", "描", "幽", "隱", "貌", "漆", "乍", "添"] },
              { title: "第八課 葫蘆瓜", words: ["葫", "蘆", "幼", "鄰", "蔓", "攀", "莖", "蜂", "營", "蝴", "蝶", "翩", "吱", "喳", "灌", "溉", "誠", "盼"] },
              { title: "第九課 窗邊的鳴聲", words: ["玻", "璃", "測", "棲", "覓", "昆", "誘", "繡", "尊", "慮", "側", "褐", "掀", "暑", "圃", "籬", "戀", "捨", "淋"] },
              { title: "第十課 敏銳觀察", words: ["銳", "膩", "偉", "格", "納", "德", "洲", "洋", "湊", "陸", "移", "評", "飾", "髮", "詞", "丈", "銷", "售", "臘"] },
              { title: "第十一課 你一定會聽見的", words: ["蒲", "梳", "蓬", "砂", "螞", "蟻", "楓", "噗", "炸", "逃", "拂", "狂", "掃", "颱", "溝", "籃", "聰", "擇", "脆"] },
              { title: "第十二課 藍色連身裙", words: ["裙", "煦", "置", "髒", "嘈", "塵", "裳", "咪", "蹈", "妻", "柵", "闢", "政", "府", "糟", "皆", "蹟"] },
            ]
          },
          {
            id: 10,
            title: "第十冊",
            lessons: [
              { title: "第一課 鵝鑾鼻詩", words: ["符", "坎", "坷", "澎", "湃", "垠", "限", "陵", "北", "瞭", "跡", "仰", "俯", "碧", "漾", "歷", "史", "喻", "遷"] },
              { title: "第二課 山與海的交響樂──東海岸鐵道", words: ["巒", "障", "喧", "翅", "膀", "態", "翱", "隧", "嘩", "灑", "綻", "降", "掠", "轟", "隆", "震", "顫", "覆", "吟"] },
              { title: "第三課 我眼中的東方之最", words: ["廟", "拾", "綴", "若", "峰", "杜", "鵑", "皇", "宇", "宙", "付", "簽", "擅", "拘", "厚", "欲", "璞", "屬"] },
              { title: "第四課 滿修女採訪記", words: ["採", "殘", "藹", "爽", "撼", "慈", "驕", "傲", "尷", "尬", "恢", "輝", "甚", "佩", "怨", "悔", "偏", "奉", "私"] },
              { title: "第五課 誰該被派去非洲", words: ["派", "囑", "咐", "武", "肉", "裕", "哲", "悟", "憐", "講", "役", "末", "慎", "瞄", "錶", "礙", "攔", "阻", "乞"] },
              { title: "第六課 幸福的味道", words: ["瀰", "暫", "耍", "猛", "索", "煞", "肅", "替", "否", "鬼", "蓆", "嗅", "股", "聯", "絡", "簿", "塗"] },
              { title: "第七課 生活有感―詩兩首", words: ["縷", "勸", "莫", "堪", "編", "禿", "椏", "畝", "鑑", "渠", "澈", "陰", "遺", "憾", "繪", "竭", "絕"] },
              { title: "第八課 懶人包大解密", words: ["媒", "謂", "詳", "泛", "繁", "哏", "詼", "瀏", "略", "刪", "篇", "婦", "頁", "價", "擷", "誤", "澄", "謠", "妨"] },
              { title: "第九課 良言一句三冬暖", words: ["疏", "謹", "懇", "誼", "訓", "委", "婉", "懈", "刀", "迥", "恰", "勵", "渾", "獲", "敵", "仗", "榮", "劍"] },
              { title: "第十課 擅長推理的人", words: ["呎", "鼻", "廓", "劑", "娓", "邏", "輯", "瀑", "謬", "露", "釋", "黝", "腕", "皙", "臂"] },
              { title: "第十一課 草船借箭", words: ["帳", "辭", "督", "殺", "侍", "酬", "詐", "匠", "延", "幔", "紮", "牽", "吶", "率", "抵", "擋", "恍", "丞", "庫"] },
              { title: "第十二課 三個問題", words: ["佳", "避", "儘", "茅", "睿", "鏟", "鬍", "虛", "呻", "血", "疲", "累", "檻", "諒", "財", "誓", "仇", "宮", "豁"] },
            ]
          },
          {
            id: 11,
            title: "第十一冊",
            lessons: [
              { title: "第一課 遇見自己", words: ["皺", "晃", "弄", "摯", "蝴", "蝶", "蛹", "翼", "註", "儲"] },
              { title: "第二課 為什麼大家不理我？", words: ["眶", "固", "執", "辯", "胞", "胎", "盼", "郵", "暈", "稚", "慘", "憤", "慨", "狠", "憂", "涕", "慰", "寞"] },
              { title: "第三課 孔子說的話", words: ["杏", "婆", "娑", "鏗", "鏘", "撫", "壇", "徒", "鍊", "曰", "矣", "舊", "焉", "亦", "辨", "警", "惕", "慧"] },
              { title: "第四課 向大自然學習", words: ["鰭", "划", "奧", "仿", "迫", "蚊", "膚", "鋸", "劃", "擴", "液", "奈", "構", "鵰", "霸", "翹", "垂"] },
              { title: "第五課 樹", words: ["施", "濘", "躁", "霎", "幹", "典", "賀", "遮", "雋", "踏", "穩", "稀", "襟", "仁", "酥", "庇", "栽"] },
              { title: "第六課 善用自嘲，展現幽默", words: ["嘲", "詼", "僵", "侃", "競", "醜", "哄", "判", "諷", "丐", "貶", "捏", "吻", "坦", "魅"] },
              { title: "第七課 跟著公共藝術去旅行", words: ["姨", "雕", "拓", "蕨", "梅", "佇", "冽", "澤", "苞", "錦", "鄒", "眨", "鏽", "鋼", "涵", "銅", "籍", "略"] },
              { title: "第八課 街頭藝術家", words: ["墩", "塗", "撇", "咧", "攏", "副", "羈", "伙", "鈔", "幣", "喇", "脹", "筋", "儼", "廂", "弦", "矩", "羨"] },
              { title: "第九課 孫翠鳳和歌仔戲", words: ["鬟", "涯", "劈", "腿", "倍", "邁", "獅", "丑", "甘", "井", "騰", "素", "絢", "柱", "吊", "蘭", "尤"] },
              { title: "第十課 過故人莊", words: ["莊", "暢", "黍", "郭", "斜", "軒", "桑", "菊", "穀", "曆", "綿", "殷", "勤", "樸", "訂"] },
              { title: "第十一課 走一段海岸", words: ["蹋", "愁", "岩", "濤", "洶", "湧", "瑣", "礫", "豆", "鹽", "叨", "泣", "頰", "蟹", "挽"] },
              { title: "第十二課 存根", words: ["銜", "割", "嫁", "辛", "販", "憑", "鑿", "傢", "駁", "誣", "監", "蒂", "莖", "粗", "毫"] },
            ]
          },
          {
            id: 12,
            title: "第十二冊",
            lessons: [
              { title: "第一課 遊走在世界的市場裡", words: ["遛", "逛", "繫", "陌", "俐", "醬", "咖", "啡", "倚", "貨", "築", "恨", "贈", "剌", "豔", "辣", "襯", "托", "彰", "購"] },
              { title: "第二課 到不來梅當個樂師吧", words: ["疆", "港", "摒", "諺", "罐", "驢", "馱", "衰", "盜", "頤", "怖", "嘶", "啞", "嗓", "嚥", "爪", "梁", "喻", "惦", "初"] },
              { title: "第三課 大小剛好的鞋子", words: ["踝", "絨", "號", "濺", "屈", "嫌", "埃", "縱", "攝", "氏", "逢", "倨", "嗤", "欠", "陋", "寡", "嗯"] },
              { title: "第四課 王戎辨苦李", words: ["戎", "李", "劉", "彙", "晉", "軼", "撰", "遣", "辭", "栩", "唯", "濬", "致", "纍", "澀", "賅", "敘", "述"] },
              { title: "第五課 童年‧夏日‧棉花糖", words: ["巷", "凰", "葵", "巔", "盎", "梭", "緯", "勺", "晶", "瑩", "攪", "拌", "剪", "裁", "鋁", "防", "鈴", "逝", "恆", "恬"] },
              { title: "第六課 兒童的保護傘", words: ["輔", "仆", "傾", "窘", "貧", "兼", "職", "畢", "飢", "刊", "斤", "貸", "捍", "含", "歧", "抑", "濟", "績", "凌", "妨"] },
              { title: "第七課 你為何而學", words: ["驅", "衷", "迭", "滯", "崗", "謂", "秉", "俱", "誕", "旺", "鑰", "匙", "挫", "蔽", "域", "侷", "掘", "釐", "燃"] },
              { title: "第八課 我的武俠大夢", words: ["駕", "拈", "豬", "蜘", "蛛", "詫", "啼", "抉", "苛", "塌", "稿", "湛", "鍛", "旨", "柢", "茁", "懵", "驟"] },
              { title: "第九課 雛鳥試飛", words: ["雛", "膛", "芒", "啾", "拙", "懼", "凶", "漲", "鷗", "嘹", "滔", "襲", "陷", "阱"] },
            ]
          }
        ];

        const App = () => {
          const [currentView, setCurrentView] = useState('menu'); 
          const [selectedPublisher, setSelectedPublisher] = useState(null); 
          const [selectedBook, setSelectedBook] = useState(null); 
          const [selectedLesson, setSelectedLesson] = useState(null); 
          const [practiceList, setPracticeList] = useState([]); 
          const [currentWordIndex, setCurrentWordIndex] = useState(0);
          const [isCovered, setIsCovered] = useState(false); 
          const [maskStage, setMaskStage] = useState(3);
          const [timer, setTimer] = useState(3);
          const [currentStars, setCurrentStars] = useState(3); 
          const [results, setResults] = useState([]); 
          const [retrySelection, setRetrySelection] = useState({
            threeStar: false,
            twoStar: false,
            oneStar: true,
            zeroStar: true
          });

          const timerRef = useRef(null);

          const SEMESTERS = [
            "(一上)", "(一下)", 
            "(二上)", "(二下)", 
            "(三上)", "(三下)", 
            "(四上)", "(四下)", 
            "(五上)", "(五下)", 
            "(六上)", "(六下)"
          ];

          const getCurrentData = () => {
            switch(selectedPublisher) {
              case 'kangxuan': return DATA_KANG_XUAN;
              case 'nanyi': return DATA_NAN_YI;
              case 'hanlin': return DATA_HAN_LIN;
              default: return [];
            }
          };

          const getPublisherName = () => {
            switch(selectedPublisher) {
              case 'kangxuan': return '康軒版';
              case 'nanyi': return '南一版';
              case 'hanlin': return '翰林版';
              default: return '';
            }
          };

          const getTheme = () => {
            switch(selectedPublisher) {
              case 'nanyi':
                return {
                  bg: 'bg-green-50',
                  title: 'text-green-800',
                  border: 'border-green-500',
                  icon: 'text-green-600',
                  button: 'bg-green-600 hover:bg-green-700 text-white',
                  lightButton: 'bg-green-100 hover:bg-green-200 text-green-700',
                  tagBg: 'bg-green-100',
                  tagText: 'text-green-800',
                  progress: 'text-green-600',
                  divide: 'bg-green-200'
                };
              case 'hanlin':
                return {
                  bg: 'bg-orange-50',
                  title: 'text-orange-800',
                  border: 'border-orange-500',
                  icon: 'text-orange-600',
                  button: 'bg-orange-600 hover:bg-orange-700 text-white',
                  lightButton: 'bg-orange-100 hover:bg-orange-200 text-orange-700',
                  tagBg: 'bg-orange-100',
                  tagText: 'text-orange-800',
                  progress: 'text-orange-600',
                  divide: 'bg-orange-200'
                };
              case 'kangxuan':
              default:
                return {
                  bg: 'bg-yellow-50',
                  title: 'text-yellow-800',
                  border: 'border-yellow-500',
                  icon: 'text-yellow-600',
                  button: 'bg-yellow-500 hover:bg-yellow-600 text-white',
                  lightButton: 'bg-yellow-100 hover:bg-yellow-200 text-yellow-800',
                  tagBg: 'bg-yellow-100',
                  tagText: 'text-yellow-800',
                  progress: 'text-yellow-600',
                  divide: 'bg-yellow-200'
                };
            }
          };

          const theme = getTheme();

          const selectPublisher = (publisherId) => {
            setSelectedPublisher(publisherId);
            setSelectedBook(null);
          };

          const backToPublishers = () => {
            setSelectedPublisher(null);
            setSelectedBook(null);
            setSelectedLesson(null);
          };

          const selectBook = (book) => {
            setSelectedBook(book);
            setSelectedLesson(null); 
          };

          const backToBooks = () => {
            setSelectedBook(null);
            setSelectedLesson(null);
          };

          const startLesson = (lesson) => {
            setSelectedLesson(lesson);
            setPracticeList(lesson.words); 
            startGameSession(lesson.words);
          };

          const startGameSession = (words) => {
            setPracticeList(words);
            setCurrentWordIndex(0);
            setResults([]); 
            setCurrentView('game');
            resetWordState();
          };

          const resetWordState = () => {
            setIsCovered(false);
            setMaskStage(3); 
            setTimer(3);
            setCurrentStars(3); 
            
            if (timerRef.current) clearInterval(timerRef.current);

            timerRef.current = setInterval(() => {
              setTimer((prev) => {
                if (prev <= 1) {
                  clearInterval(timerRef.current);
                  setIsCovered(true); 
                  return 0;
                }
                return prev - 1;
              });
            }, 1000);
          };

          const nextWord = () => {
            const newResult = { 
              word: practiceList[currentWordIndex], 
              stars: currentStars 
            };
            
            const updatedResults = [...results, newResult];
            setResults(updatedResults);

            if (currentWordIndex < practiceList.length - 1) {
              setCurrentWordIndex(prev => prev + 1);
              resetWordState();
            } else {
              setCurrentView('finished');
            }
          };

          const handleMaskClick = () => {
            if (!isCovered || maskStage <= 0) return;
            setMaskStage(prev => prev - 1);
            setCurrentStars(prev => Math.max(0, prev - 1));
          };

          const speakWord = () => {
            if ('speechSynthesis' in window) {
              const utterance = new SpeechSynthesisUtterance(practiceList[currentWordIndex]);
              utterance.lang = 'zh-TW';
              utterance.rate = 0.8; 
              window.speechSynthesis.cancel(); 
              window.speechSynthesis.speak(utterance);
            } else {
              alert("您的瀏覽器不支援語音功能");
            }
          };

          const handleRetrySelected = () => {
            const threeStarWords = results.filter(r => r.stars === 3).map(r => r.word);
            const twoStarWords = results.filter(r => r.stars === 2).map(r => r.word);
            const oneStarWords = results.filter(r => r.stars === 1).map(r => r.word);
            const zeroStarWords = results.filter(r => r.stars === 0).map(r => r.word);

            let newWords = [];
            if (retrySelection.threeStar) newWords = [...newWords, ...threeStarWords];
            if (retrySelection.twoStar) newWords = [...newWords, ...twoStarWords];
            if (retrySelection.oneStar) newWords = [...newWords, ...oneStarWords];
            if (retrySelection.zeroStar) newWords = [...newWords, ...zeroStarWords];

            if (newWords.length === 0) {
              alert("請至少選擇一個類別來複習！"); 
              return;
            }

            startGameSession(newWords);
          };

          const goHome = () => {
            if (timerRef.current) clearInterval(timerRef.current);
            setCurrentView('menu');
            setResults([]);
          };

          useEffect(() => {
            return () => {
              if (timerRef.current) clearInterval(timerRef.current);
            };
          }, []);

          if (currentView === 'menu') {
            return (
              <div className={`min-h-screen ${selectedPublisher ? theme.bg : 'bg-yellow-50'} p-6 flex flex-col items-center`}>
                <header className="mb-8 text-center">
                  <h1 
                    className={`text-5xl md:text-6xl font-bold ${selectedPublisher ? theme.title : 'text-yellow-800'} mb-6`}
                    style={{ fontFamily: '"Gen Jyuu Gothic P", "Rounded Mplus 1c", "Microsoft JhengHei", "微軟正黑體", sans-serif' }}
                  >
                    國小生字書寫遮蔽複習系統
                  </h1>
                  <p 
                    className="text-xl text-gray-700 max-w-3xl mx-auto leading-relaxed"
                    style={{ fontFamily: '"Gen Jyuu Gothic P", "Rounded Mplus 1c", "Microsoft JhengHei", "微軟正黑體", sans-serif' }}
                  >
                    請先<span className="text-2xl font-bold text-red-600 mx-2 decoration-4 underline decoration-red-300 underline-offset-4">準備好白紙或生字簿</span>，選擇課文後，每個字會出現三秒，三秒後請立即將字寫下來，想要提示的話請按一下<span className="font-bold text-gray-600">中間的圓圈</span>！
                  </p>
                </header>

                {!selectedPublisher && (
                  <div className="w-full max-w-5xl animate-in fade-in zoom-in duration-300">
                     <div className="flex items-center gap-2 mb-4 text-gray-600 justify-center">
                        <Layers size={28} />
                        <h2 className="text-3xl font-bold">請選擇版本</h2>
                     </div>
                     <div className="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
                        <button
                          onClick={() => selectPublisher('kangxuan')}
                          className="bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl hover:scale-105 transition-all border-b-8 border-yellow-500 flex flex-col items-center justify-center gap-4 group aspect-[4/5]"
                        >
                           <div className="w-20 h-20 rounded-full bg-yellow-100 flex items-center justify-center group-hover:bg-yellow-200 transition-colors">
                              <BookOpen size={40} className="text-yellow-600" />
                           </div>
                           <h3 className="text-3xl font-bold text-gray-800">康軒版</h3>
                           <span className="text-gray-500">1-12 冊完整生字(114學年版)</span>
                        </button>

                        <button
                          onClick={() => selectPublisher('nanyi')}
                          className="bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl hover:scale-105 transition-all border-b-8 border-green-500 flex flex-col items-center justify-center gap-4 group aspect-[4/5]"
                        >
                           <div className="w-20 h-20 rounded-full bg-green-100 flex items-center justify-center group-hover:bg-green-200 transition-colors">
                              <BookOpen size={40} className="text-green-600" />
                           </div>
                           <h3 className="text-3xl font-bold text-gray-800">南一版</h3>
                           <span className="text-gray-500">1-12 冊完整生字(114學年版)</span>
                        </button>

                        <button
                          onClick={() => selectPublisher('hanlin')}
                          className="bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl hover:scale-105 transition-all border-b-8 border-orange-500 flex flex-col items-center justify-center gap-4 group aspect-[4/5]"
                        >
                           <div className="w-20 h-20 rounded-full bg-orange-100 flex items-center justify-center group-hover:bg-orange-200 transition-colors">
                              <BookOpen size={40} className="text-orange-600" />
                           </div>
                           <h3 className="text-3xl font-bold text-gray-800">翰林版</h3>
                           <span className="text-gray-500">1-12 冊完整生字(114學年版)</span>
                        </button>
                     </div>
                  </div>
                )}

                {selectedPublisher && !selectedBook && (
                  <div className="w-full max-w-5xl animate-in fade-in slide-in-from-right-4 duration-300">
                     <div className="flex items-center justify-between mb-6">
                       <button 
                         onClick={backToPublishers}
                         className="flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-sm hover:bg-gray-100 text-gray-600 font-bold transition-colors"
                       >
                          <ChevronLeft size={20} /> 返回版本選擇
                       </button>
                       <h2 className={`text-2xl font-bold ${theme.title} flex items-center gap-2`}>
                         <span className={`${theme.tagBg} ${theme.tagText} px-3 py-1 rounded-lg text-lg`}>{getPublisherName()}</span> 
                         冊別列表
                       </h2>
                       <div className="w-24"></div> 
                    </div>

                     <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                      {getCurrentData().map((book) => (
                        <button
                          key={book.id}
                          onClick={() => selectBook(book)}
                          className={`bg-white p-6 rounded-xl shadow-md hover:shadow-lg hover:scale-105 transition-all border-b-4 flex flex-col items-center justify-center gap-2 aspect-[4/3] ${
                            book.lessons.length === 0 ? 'opacity-50 cursor-not-allowed grayscale' : `${theme.border} cursor-pointer`
                          }`}
                          disabled={book.lessons.length === 0}
                        >
                          <BookOpen size={40} className={theme.icon} />
                          <div className="text-center">
                            <h3 className="text-2xl font-bold text-gray-800">{book.title}</h3>
                            <div className={`text-lg font-bold ${theme.title} opacity-80`}>
                              {SEMESTERS[book.id - 1]}
                            </div>
                          </div>
                          <span className="text-gray-500 text-sm mt-1">
                            {book.lessons.length > 0 ? `${book.lessons.length} 課` : '尚無資料'}
                          </span>
                        </button>
                      ))}
                    </div>
                  </div>
                )}

                {selectedBook && (
                  <div className="w-full max-w-5xl animate-in fade-in slide-in-from-bottom-4 duration-300">
                    <div className="flex items-center justify-between mb-6">
                       <button 
                         onClick={backToBooks}
                         className="flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-sm hover:bg-gray-100 text-gray-600 font-bold transition-colors"
                       >
                          <ChevronLeft size={20} /> 返回{getPublisherName()}
                       </button>
                       <h2 className={`text-2xl font-bold ${theme.title} flex items-center gap-2`}>
                         <span className={`${theme.tagBg} ${theme.tagText} px-3 py-1 rounded-lg text-lg`}>{selectedBook.title}</span> 
                         課程列表
                       </h2>
                       <div className="w-24"></div> 
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                      {selectedBook.lessons.map((lesson, idx) => (
                        <button
                          key={idx}
                          onClick={() => startLesson(lesson)}
                          className={`bg-white p-6 rounded-xl shadow-md hover:shadow-lg hover:scale-105 transition-all border-l-4 ${theme.border} flex flex-col items-start text-left`}
                        >
                          <h3 className="text-xl font-bold text-gray-800 mb-2" style={{ fontFamily: '"Microsoft JhengHei", sans-serif' }}>{lesson.title}</h3>
                          <div className="text-sm text-gray-500 w-full" style={{ fontFamily: '"Microsoft JhengHei", sans-serif' }}>
                            <div className="flex flex-wrap gap-1 mb-2">
                               {lesson.words.slice(0, 8).map(w => w).join('、')}
                               {lesson.words.length > 8 && "..."}
                            </div>
                            <span className={`inline-block ${theme.tagBg} ${theme.tagText} px-2 py-0.5 rounded-full text-xs`}>
                              共 {lesson.words.length} 字
                            </span>
                          </div>
                        </button>
                      ))}
                    </div>
                  </div>
                )}
              </div>
            );
          }

          if (currentView === 'finished') {
            const totalPossibleStars = practiceList.length * 3; 
            const totalEarnedStars = results.reduce((acc, curr) => acc + curr.stars, 0);
            const percentage = Math.round((totalEarnedStars / totalPossibleStars) * 100);

            const threeStarWords = results.filter(r => r.stars === 3);
            const twoStarWords = results.filter(r => r.stars === 2);
            const oneStarWords = results.filter(r => r.stars === 1);
            const zeroStarWords = results.filter(r => r.stars === 0);

            return (
              <div className="min-h-screen bg-gray-50 p-6 flex justify-center">
                <div className="bg-white p-8 rounded-3xl shadow-xl max-w-2xl w-full h-fit my-auto">
                  
                  <div className="text-center mb-8">
                    <div className="inline-flex items-center justify-center p-3 bg-yellow-100 rounded-full mb-4">
                      <Award size={48} className="text-yellow-600" />
                    </div>
                    <h2 className="text-3xl font-bold text-gray-800 mb-2">練習完成！</h2>
                    <p className="text-gray-500">{getPublisherName()} {selectedBook?.title} - {selectedLesson?.title}</p>
                  </div>

                  <div className={`rounded-xl p-6 mb-8 flex flex-col md:flex-row items-center justify-around gap-4 ${theme.tagBg}`}>
                    <div className="text-center">
                      <p className="text-gray-500 text-sm mb-1">獲得星星</p>
                      <p className={`text-4xl font-bold ${theme.progress}`}>{totalEarnedStars} <span className="text-lg text-gray-400">/ {totalPossibleStars}</span></p>
                    </div>
                    <div className={`hidden md:block w-px h-12 ${theme.divide}`}></div>
                    <div className="text-center">
                      <p className="text-gray-500 text-sm mb-1">達成率</p>
                      <p className={`text-4xl font-bold ${theme.progress}`}>{percentage}%</p>
                    </div>
                  </div>

                  <div className="mb-8 p-4 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl">
                     <h3 className="text-center text-gray-700 font-bold mb-4 flex items-center justify-center gap-2 text-lg">
                        <BookOpen size={24} className="text-gray-600"/> 正確寫法核對
                     </h3>
                     <div className="grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3">
                       {practiceList.map((word, i) => (
                         <div key={i} className="aspect-square bg-white border border-gray-300 rounded-lg flex items-center justify-center shadow-sm">
                           <span className="text-4xl sm:text-5xl font-bold text-gray-800 leading-none" style={{fontFamily: 'KaiTi, DFKai-SB, serif'}}>
                             {word}
                           </span>
                         </div>
                       ))}
                     </div>
                  </div>

                  <p className="text-center text-gray-500 text-sm mb-4">👇 勾選你想重新練習的類別 👇</p>

                  <div className="space-y-4 mb-8">
                    
                    <div className={`border-2 rounded-xl p-4 transition-all ${retrySelection.threeStar ? 'border-green-500 bg-green-50' : 'border-gray-200 bg-white'}`}>
                      <label className="flex items-center cursor-pointer select-none mb-3">
                        <input 
                          type="checkbox" 
                          checked={retrySelection.threeStar}
                          onChange={(e) => setRetrySelection({...retrySelection, threeStar: e.target.checked})}
                          className="w-5 h-5 mr-3 text-green-600 rounded focus:ring-green-500"
                        />
                        <span className="flex items-center gap-2 font-bold text-green-700 text-lg">
                          <Star className="fill-green-600 text-green-600" size={20}/> 
                          完全記住 (3星)
                          <span className="text-xs bg-green-200 text-green-800 px-2 py-0.5 rounded-full">{threeStarWords.length}個</span>
                        </span>
                      </label>
                      <div className="flex flex-wrap gap-2 pl-8">
                        {threeStarWords.length > 0 ? (
                          threeStarWords.map((item, i) => (
                            <span key={i} className="w-10 h-10 flex items-center justify-center bg-white border border-green-200 rounded-lg text-lg font-bold shadow-sm text-gray-700">
                              {item.word}
                            </span>
                          ))
                        ) : (
                          <span className="text-gray-400 text-sm italic">無</span>
                        )}
                      </div>
                    </div>

                    <div className={`border-2 rounded-xl p-4 transition-all ${retrySelection.twoStar ? 'border-blue-400 bg-blue-50' : 'border-gray-200 bg-white'}`}>
                      <label className="flex items-center cursor-pointer select-none mb-3">
                        <input 
                          type="checkbox" 
                          checked={retrySelection.twoStar}
                          onChange={(e) => setRetrySelection({...retrySelection, twoStar: e.target.checked})}
                          className="w-5 h-5 mr-3 text-blue-600 rounded focus:ring-blue-500"
                        />
                        <span className="flex items-center gap-2 font-bold text-blue-700 text-lg">
                          <Star className="fill-blue-500 text-blue-500" size={20}/> 
                          只看一點 (2星)
                          <span className="text-xs bg-blue-200 text-blue-800 px-2 py-0.5 rounded-full">{twoStarWords.length}個</span>
                        </span>
                      </label>
                      <div className="flex flex-wrap gap-2 pl-8">
                        {twoStarWords.length > 0 ? (
                          twoStarWords.map((item, i) => (
                            <span key={i} className="w-10 h-10 flex items-center justify-center bg-white border border-blue-200 rounded-lg text-lg font-bold shadow-sm relative text-gray-700">
                              {item.word}
                            </span>
                          ))
                        ) : (
                          <span className="text-gray-400 text-sm italic">無</span>
                        )}
                      </div>
                    </div>

                    <div className={`border-2 rounded-xl p-4 transition-all ${retrySelection.oneStar ? 'border-yellow-400 bg-yellow-50' : 'border-gray-200 bg-white'}`}>
                      <label className="flex items-center cursor-pointer select-none mb-3">
                        <input 
                          type="checkbox" 
                          checked={retrySelection.oneStar}
                          onChange={(e) => setRetrySelection({...retrySelection, oneStar: e.target.checked})}
                          className="w-5 h-5 mr-3 text-yellow-600 rounded focus:ring-yellow-500"
                        />
                        <span className="flex items-center gap-2 font-bold text-yellow-700 text-lg">
                          <Star className="fill-yellow-500 text-yellow-500" size={20}/> 
                          有一點忘記 (1星)
                          <span className="text-xs bg-yellow-200 text-yellow-800 px-2 py-0.5 rounded-full">{oneStarWords.length}個</span>
                        </span>
                      </label>
                      <div className="flex flex-wrap gap-2 pl-8">
                        {oneStarWords.length > 0 ? (
                          oneStarWords.map((item, i) => (
                            <span key={i} className="w-10 h-10 flex items-center justify-center bg-white border border-yellow-200 rounded-lg text-lg font-bold shadow-sm relative text-gray-700">
                              {item.word}
                            </span>
                          ))
                        ) : (
                          <span className="text-gray-400 text-sm italic">無</span>
                        )}
                      </div>
                    </div>

                    <div className={`border-2 rounded-xl p-4 transition-all ${retrySelection.zeroStar ? 'border-red-400 bg-red-50' : 'border-gray-200 bg-white'}`}>
                      <label className="flex items-center cursor-pointer select-none mb-3">
                        <input 
                          type="checkbox" 
                          checked={retrySelection.zeroStar}
                          onChange={(e) => setRetrySelection({...retrySelection, zeroStar: e.target.checked})}
                          className="w-5 h-5 mr-3 text-red-600 rounded focus:ring-red-500"
                        />
                        <span className="flex items-center gap-2 font-bold text-red-700 text-lg">
                          <Star className="text-red-500" size={20}/> 
                          不太熟的字 (0星)
                          <span className="text-xs bg-red-200 text-red-800 px-2 py-0.5 rounded-full">{zeroStarWords.length}個</span>
                        </span>
                      </label>
                      <div className="flex flex-wrap gap-2 pl-8">
                        {zeroStarWords.length > 0 ? (
                          zeroStarWords.map((item, i) => (
                            <span key={i} className="w-10 h-10 flex items-center justify-center bg-white border border-red-200 rounded-lg text-lg font-bold shadow-sm relative text-gray-700">
                              {item.word}
                            </span>
                          ))
                        ) : (
                          <span className="text-gray-400 text-sm italic">無</span>
                        )}
                      </div>
                    </div>
                  </div>

                  <div className="flex flex-col gap-3">
                    <button 
                      onClick={handleRetrySelected}
                      className={`w-full py-4 ${theme.button} text-white rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 text-lg`}
                    >
                      <RefreshCw size={24} /> 開始針對性練習
                    </button>
                    
                    <div className="flex gap-3">
                      <button 
                        onClick={() => startLesson(selectedLesson)}
                        className={`flex-1 py-3 ${theme.lightButton} rounded-lg font-bold flex items-center justify-center gap-2`}
                      >
                        <RefreshCw size={20} /> 重玩整課
                      </button>
                      <button 
                        onClick={goHome}
                        className="flex-1 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-bold flex items-center justify-center gap-2"
                      >
                        <Home size={20} /> 回主選單
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          return (
            <div className={`min-h-screen ${theme.bg} flex flex-col items-center justify-center p-4`}>
              <div className="w-full max-w-md flex justify-between items-center mb-6">
                <button onClick={goHome} className="p-2 text-gray-500 hover:bg-gray-200 rounded-full">
                  <Home size={24} />
                </button>
                <div className="text-center">
                  <h2 className="font-bold text-gray-700">{getPublisherName()} {selectedBook?.title} - {selectedLesson?.title.split(' ')[0]}</h2>
                  <span className="text-sm text-gray-500">進度: {currentWordIndex + 1} / {practiceList.length}</span>
                </div>
                <div className="w-10"></div>
              </div>

              <div className="flex items-center justify-center gap-4 md:gap-8 mb-8 w-full max-w-3xl">
                <div className="w-20 md:w-24 flex justify-end flex-shrink-0">
                  {!isCovered && (
                     <div className="w-20 h-20 bg-red-500 rounded-full flex flex-col items-center justify-center text-white shadow-lg animate-pulse">
                        <Clock size={20} className="mb-1 opacity-80" />
                        <span className="text-4xl font-bold leading-none">{timer}</span>
                     </div>
                  )}
                </div>

                <div className="relative">
                  <div className="absolute -top-10 right-0 flex gap-1 p-1">
                    {[1, 2, 3].map((star) => (
                      <Star 
                        key={star} 
                        size={24} 
                        className={`transition-all duration-300 drop-shadow-sm ${
                          star <= currentStars 
                            ? 'fill-yellow-400 text-yellow-400' 
                            : 'fill-gray-300 text-gray-300'
                        }`}
                      />
                    ))}
                  </div>

                  <div className="relative w-72 h-72 md:w-80 md:h-80 border-4 border-gray-800 rounded-lg flex items-center justify-center overflow-hidden bg-white select-none shadow-xl">
                    <span className="text-[160px] md:text-[200px] text-black leading-none" style={{fontFamily: '"BiauKai", "標楷體", "DFKai-SB", "KaiTi", serif', fontWeight: 'normal'}}>
                      {practiceList[currentWordIndex]}
                    </span>

                    <div className={`absolute inset-0 transition-opacity duration-300 ${isCovered ? 'opacity-100 pointer-events-auto' : 'opacity-0 pointer-events-none'}`}>
                        
                        <div 
                            className={`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2
                                        w-[30%] h-[30%] bg-yellow-600 rounded-full z-10 shadow-lg border-2 border-yellow-400
                                        flex items-center justify-center cursor-pointer hover:bg-yellow-700 transition-all duration-300
                                        ${maskStage >= 1 ? 'scale-100 opacity-100' : 'scale-90 opacity-0 pointer-events-none'}`}
                            onClick={handleMaskClick}
                        >
                            <HelpCircle className="text-white opacity-50" size={24} />
                        </div>

                        <div 
                            className={`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2
                                        w-[40%] h-[40%] bg-yellow-500 rounded-full z-20 shadow-lg border-2 border-yellow-400
                                        flex items-center justify-center cursor-pointer hover:bg-yellow-600 transition-all duration-300
                                        ${maskStage >= 2 ? 'scale-100 opacity-100' : 'scale-90 opacity-0 pointer-events-none'}`}
                            onClick={handleMaskClick}
                        >
                            <HelpCircle className="text-white opacity-50" size={32} />
                        </div>

                        <div 
                            className={`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2
                                        w-[60%] h-[60%] bg-yellow-400 rounded-full z-30 shadow-xl border-4 border-yellow-300
                                        flex items-center justify-center cursor-pointer hover:bg-yellow-500 transition-all duration-300
                                        ${maskStage >= 3 ? 'scale-100 opacity-100' : 'scale-110 opacity-0 pointer-events-none'}`}
                            onClick={handleMaskClick}
                        >
                            <div className="flex flex-col items-center text-white opacity-70">
                                <HelpCircle size={48} />
                                <span className="text-sm font-bold mt-1">點擊提示</span>
                            </div>
                        </div>

                    </div>
                  </div>
                </div>

                <div className="w-20 md:w-24 flex justify-start flex-shrink-0">
                     <button 
                       onClick={speakWord}
                       className="w-16 h-16 md:w-20 md:h-20 bg-blue-500 hover:bg-blue-600 rounded-full flex flex-col items-center justify-center text-white shadow-lg transition-transform active:scale-95"
                       title="聽讀音"
                     >
                        <Volume2 size={32} />
                     </button>
                </div>
              </div>

              <div className="flex flex-col items-center gap-4 w-full max-w-md">
                <div className="h-6 text-gray-600 font-medium text-center">
                  {!isCovered ? (
                    <span className="text-red-500 flex items-center gap-2">
                      <span className="animate-bounce">👀</span> 請仔細看，記住這個字！
                    </span>
                  ) : maskStage >= 3 ? (
                    <span className={`${theme.progress} flex items-center gap-2`}>
                      <span className="animate-bounce">👆</span> 點擊圓圈看提示 (扣一顆星)
                    </span>
                  ) : maskStage >= 2 ? (
                     <span className={`${theme.progress} flex items-center gap-2`}>
                      <span className="animate-bounce">👆</span> 再點一次看一半 (再扣一顆星)
                    </span>
                  ) : maskStage >= 1 ? (
                    <span className={`${theme.progress} flex items-center gap-2`}>
                     <span className="animate-bounce">👆</span> 剩最後一次提示 (再扣一顆星)
                   </span>
                 ) : (
                     <span className="text-orange-600 font-bold flex items-center gap-2 animate-pulse">
                       如果還是想不起來，先寫下一題
                    </span>
                  )}
                </div>

                <button
                  onClick={nextWord}
                  className={`w-full py-4 ${theme.button} text-white rounded-xl text-xl font-bold shadow-lg transform transition-all active:scale-95 flex items-center justify-center gap-2`}
                >
                  下一題 <ArrowRight size={24} />
                </button>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>